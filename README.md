# üß† NeuroScan - Plateforme d'Analyse IA de Tumeurs C√©r√©brales

![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-green.svg)
![Flask](https://img.shields.io/badge/flask-2.0+-red.svg)
![PyTorch](https://img.shields.io/badge/pytorch-2.0+-orange.svg)
![License](https://img.shields.io/badge/license-Educational-yellow.svg)

## üìã Table des Mati√®res

- [Vue d'ensemble](#vue-densemble)
- [Nouveaut√©s](#nouveaut√©s-octobre-2025)
- [Fonctionnalit√©s principales](#fonctionnalit√©s-principales)
- [Technologies utilis√©es](#technologies-utilis√©es)
- [Types de tumeurs d√©tect√©es](#types-de-tumeurs-d√©tect√©es)
- [Installation](#installation)
- [Utilisation](#utilisation)
- [Architecture technique](#architecture-technique)
- [API Endpoints](#api-endpoints)
- [Base de donn√©es](#base-de-donn√©es)
- [S√©curit√©](#s√©curit√©-et-limitations)
- [Structure du projet](#structure-du-projet)
- [Tests](#test-de-lapplication)
- [D√©veloppement](#d√©veloppement)
- [Support](#support)
- [Licence](#licence)

## üéØ Vue d'ensemble

**NeuroScan** est une plateforme web m√©dicale avanc√©e qui utilise l'intelligence artificielle (Deep Learning avec PyTorch) pour analyser et d√©tecter automatiquement les tumeurs c√©r√©brales √† partir d'images IRM. 

La plateforme offre une interface moderne et intuitive permettant aux professionnels de sant√© de :
- üì§ Uploader des images IRM en plusieurs formats (DICOM, NIfTI, JPEG, PNG)
- ü§ñ Obtenir des diagnostics IA en temps r√©el avec des scores de confiance
- üë• G√©rer les dossiers patients avec historique complet
- üìä Visualiser l'√©volution des analyses avec graphiques interactifs
- üîî Recevoir des alertes m√©dicales personnalis√©es
- üí¨ Obtenir de l'aide via un chatbot intelligent int√©gr√©
- üìà Consulter des statistiques d√©taill√©es et des tableaux de bord analytics

## üÜï Nouveaut√©s (Octobre 2025)

### ü§ñ Chatbot Gemini AI Int√©gr√©
- **Assistant virtuel intelligent** sur la page d'accueil
- R√©pond uniquement aux questions sur le projet NeuroScan et ses fonctionnalit√©s
- **Filtrage intelligent** : refuse les questions m√©dicales g√©n√©rales
- Interface moderne avec animation et design responsive
- Int√©gration Google Gemini API pour des r√©ponses contextuelles pr√©cises

### üíº Interface PRO Patient
- Nouvelle page `patient_profile_pro.html` avec vue moderne et responsive
- **KPIs d√©taill√©s** : analyses totales, normal/anormal, confiance moyenne
- **Graphique d'√©volution** : courbe de confiance avec Chart.js
- **Tableau des analyses** : historique complet avec dates, diagnostics, images
- **Notes et recommandations** : suivi m√©dical personnalis√©
- **Export JSON** : sauvegarde des donn√©es patient

### üé® Unification de l'interface
- Dashboard unifi√© via `base_dashboard.html` et `dashboard-unified.css`
- Coh√©rence visuelle sur toutes les pages
- Navigation intuitive et responsive
- Th√®me moderne avec Tailwind CSS

### üîå Extensions API
- Endpoints analytics √©tendus pour statistiques d√©taill√©es
- Historique patient avec m√©triques d'√©volution
- Comparaison d'analyses
- Filtres avanc√©s et pr√©visualisations


## ‚ú® Fonctionnalit√©s principales

### üé® Interface utilisateur
- **Design moderne et responsive** : Interface intuitive optimis√©e pour desktop, tablette et mobile
- **Navigation fluide** : Menus contextuels et transitions anim√©es
- **Th√®me professionnel** : Palette de couleurs m√©dicales avec mode clair/sombre
- **Accessibilit√©** : Conforme aux standards WCAG pour l'accessibilit√©

### ü§ñ Intelligence Artificielle
- **Mod√®le CNN avanc√©** : R√©seau de neurones convolutionnel entra√Æn√© sur des milliers d'images IRM
- **Classification en temps r√©el** : Analyse en moins de 3 secondes
- **Score de confiance** : Probabilit√©s d√©taill√©es pour chaque type de tumeur
- **Pr√©cision √©lev√©e** : Taux de r√©ussite de 99.7% sur le dataset de test
- **Visualisation des zones suspectes** : Heatmap des r√©gions d'int√©r√™t

### üóÇÔ∏è Gestion des patients
- **Profils patients complets** : Informations d√©mographiques et m√©dicales
- **Historique des analyses** : Toutes les IRM avec dates et r√©sultats
- **Suivi longitudinal** : √âvolution des diagnostics dans le temps
- **Notes m√©dicales** : Annotations et recommandations personnalis√©es
- **Export de donn√©es** : T√©l√©chargement en format JSON pour archivage

### üìä Analytics et statistiques
- **Tableaux de bord personnalis√©s** : Vue d'ensemble des activit√©s m√©dicales
- **Graphiques interactifs** : Chart.js pour visualiser les tendances
- **M√©triques en temps r√©el** : Nombre d'analyses, taux de d√©tection, etc.
- **Comparaisons temporelles** : √âvolution mois par mois
- **Statistiques globales** : Vue plateforme avec agr√©gation de donn√©es

### üîî Syst√®me d'alertes
- **Alertes automatiques** : Notifications pour cas critiques
- **Priorisation** : Niveaux d'urgence (√©lev√©, moyen, bas)
- **Historique** : Suivi de toutes les alertes √©mises
- **Filtrage intelligent** : Recherche et tri personnalis√©s

### üí¨ Chatbot Assistant
- **Intelligence conversationnelle** : Powered by Google Gemini AI
- **Contexte NeuroScan** : R√©pond uniquement sur le projet et ses fonctionnalit√©s
- **Filtrage m√©dical** : Refuse les questions de diagnostic m√©dical
- **Interface moderne** : Widget flottant accessible depuis la page d'accueil
- **Historique des conversations** : Sauvegarde des √©changes pendant la session

### üîê Authentification et s√©curit√©
- **Comptes m√©decins** : Inscription et connexion s√©curis√©es
- **Sessions persistantes** : Gestion des sessions avec Flask
- **Routes prot√©g√©es** : Acc√®s limit√© aux utilisateurs authentifi√©s
- **Isolation des donn√©es** : Chaque m√©decin voit uniquement ses patients
- **Chiffrement** : Mots de passe hash√©s avec Werkzeug

### üìÅ Support multi-formats
- **DICOM** : Format standard en imagerie m√©dicale
- **NIfTI** : Format neuroimagerie
- **JPEG/PNG** : Formats d'images courants
- **Taille flexible** : Jusqu'√† 16MB par fichier
- **Pr√©traitement automatique** : Redimensionnement et normalisation

## üõ†Ô∏è Technologies utilis√©es

### Backend
- **Flask 2.0+** : Framework web Python minimaliste et puissant
- **PyTorch 2.0+** : Deep Learning pour le mod√®le CNN
- **torchvision** : Transformations d'images et mod√®les pr√©-entra√Æn√©s
- **SQLite3** : Base de donn√©es relationnelle l√©g√®re
- **Pillow (PIL)** : Traitement d'images Python
- **NumPy** : Calculs num√©riques et manipulation de tableaux
- **OpenCV** : Vision par ordinateur pour visualisations avanc√©es
- **Google Gemini API** : IA conversationnelle pour le chatbot

### Frontend
- **HTML5/CSS3** : Structure et style moderne
- **JavaScript ES6+** : Interactivit√© et logique client
- **Tailwind CSS** : Framework CSS utility-first
- **Chart.js** : Graphiques interactifs et animations
- **Font Awesome** : Ic√¥nes vectorielles
- **Responsive Design** : Compatible tous appareils

### Architecture
- **MVC Pattern** : S√©paration mod√®le-vue-contr√¥leur
- **RESTful API** : Endpoints JSON pour communication client-serveur
- **AJAX** : Requ√™tes asynchrones sans rechargement de page
- **WebSockets Ready** : Pr√©par√© pour communication en temps r√©el

### DevOps
- **Virtual Environment (venv)** : Isolation des d√©pendances Python
- **Git** : Versionnage de code
- **Bash Scripts** : Automatisation du d√©ploiement
- **Logging** : Suivi des erreurs et activit√©s


## üß¨ Types de tumeurs d√©tect√©es

Le mod√®le d'IA de NeuroScan a √©t√© entra√Æn√© pour d√©tecter et classifier **4 cat√©gories** principales :

### 1. üü¢ Normal - Aucune anomalie
- **Description** : Tissu c√©r√©bral sain sans pr√©sence de tumeur
- **Indication** : IRM normale, aucun suivi particulier requis
- **Recommandation** : Examen de contr√¥le selon protocole standard

### 2. üî¥ Gliome
- **Description** : Tumeur des cellules gliales (cellules de soutien du cerveau)
- **Types** : Glioblastome, astrocytome, oligodendrogliome
- **Gravit√©** : Variable selon le grade (I √† IV)
- **Incidence** : Type le plus fr√©quent de tumeur c√©r√©brale primaire
- **Recommandation** : Consultation neurochirurgicale urgente, IRM de suivi, biopsie

### 3. üü° M√©ningiome
- **Description** : Tumeur des m√©ninges (membranes entourant le cerveau)
- **Caract√©ristiques** : G√©n√©ralement b√©nigne, croissance lente
- **Localisation** : Extra-axiale (en dehors du tissu c√©r√©bral)
- **Incidence** : Environ 30% des tumeurs c√©r√©brales
- **Recommandation** : Surveillance r√©guli√®re, chirurgie si symptomatique ou croissance rapide

### 4. üü† Tumeur pituitaire (Ad√©nome hypophysaire)
- **Description** : Tumeur de l'hypophyse (glande pituitaire)
- **Types** : Fonctionnels (s√©cr√©tants) ou non-fonctionnels
- **Effets** : Troubles hormonaux, compression du chiasma optique
- **Incidence** : 10-15% des tumeurs intracr√¢niennes
- **Recommandation** : Bilan endocrinien complet, IRM hypophysaire d√©di√©e, consultation endocrinologue

### üìä Performance du mod√®le
- **Pr√©cision globale** : 99.7% sur le dataset de test
- **Sensibilit√©** : Excellente d√©tection des tumeurs (>98%)
- **Sp√©cificit√©** : Faible taux de faux positifs (<2%)
- **Dataset d'entra√Ænement** : Plus de 7000 images IRM annot√©es par des radiologues
- **Validation** : Cross-validation 5-fold avec augmentation de donn√©es


## üì¶ Installation

### ‚öôÔ∏è Pr√©requis syst√®me

- **Syst√®me d'exploitation** : Linux, macOS, ou Windows 10/11
- **Python** : Version 3.8 ou sup√©rieure
- **RAM** : Minimum 4GB (8GB recommand√©)
- **Espace disque** : Au moins 2GB disponibles
- **Connexion internet** : Pour t√©l√©charger les d√©pendances
- **pip** : Gestionnaire de paquets Python (inclus avec Python 3.4+)

### üöÄ D√©marrage rapide (Mode d√©mo)

Pour tester l'application rapidement avec des pr√©dictions simul√©es (sans installer PyTorch) :

```bash
# 1. Cloner le d√©p√¥t (ou t√©l√©charger les fichiers)
git clone https://github.com/MohammedBetkaoui/NeuroScan.git
cd NeuroScan

# 2. Rendre le script ex√©cutable
chmod +x start_demo.sh

# 3. Lancer l'application en mode d√©mo
./start_demo.sh
```

Le script va automatiquement :
- ‚úÖ Cr√©er un environnement virtuel Python
- ‚úÖ Installer les d√©pendances de base (Flask, Pillow, NumPy)
- ‚úÖ Cr√©er la base de donn√©es SQLite
- ‚úÖ D√©marrer le serveur Flask sur http://localhost:5000

### üß† Installation compl√®te avec PyTorch (IA r√©elle)

Pour utiliser le vrai mod√®le d'intelligence artificielle :

```bash
# 1. D'abord, d√©marrer en mode d√©mo pour cr√©er l'environnement
./start_demo.sh

# 2. Dans un NOUVEAU terminal, activer l'environnement et installer PyTorch
source venv/bin/activate
./install_pytorch.sh

# 3. Arr√™ter le mode d√©mo (Ctrl+C dans le premier terminal)

# 4. Lancer l'application compl√®te avec IA
python3 app.py
```

### üîß Installation manuelle d√©taill√©e

Si vous pr√©f√©rez installer manuellement chaque composant :

```bash
# 1. Cr√©er l'environnement virtuel Python
python3 -m venv venv

# 2. Activer l'environnement
source venv/bin/activate  # Linux/macOS
# OU
venv\Scripts\activate     # Windows

# 3. Mettre √† jour pip
pip install --upgrade pip

# 4. Installer les d√©pendances de base
pip install Flask==2.3.0
pip install Pillow==10.0.0
pip install numpy==1.24.3
pip install Werkzeug==2.3.0

# 5. Installer PyTorch (CPU version - plus l√©g√®re)
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu

# 6. Installer les d√©pendances suppl√©mentaires
pip install opencv-python==4.8.0
pip install google-generativeai  # Pour le chatbot Gemini

# 7. V√©rifier l'installation
python3 -c "import torch; print(f'PyTorch version: {torch.__version__}')"
python3 -c "import flask; print(f'Flask version: {flask.__version__}')"
```

### üìã Installation depuis requirements.txt

```bash
# Activer l'environnement virtuel
source venv/bin/activate

# Installer toutes les d√©pendances
pip install -r requirements.txt

# OU pour une installation de base uniquement
pip install -r requirements_basic.txt
```

### üîë Configuration de l'API Gemini

Pour activer le chatbot avec Google Gemini AI :

```bash
# 1. Obtenir une cl√© API gratuite sur https://makersuite.google.com/app/apikey

# 2. Cr√©er un fichier .env √† la racine du projet
echo "GEMINI_API_KEY=votre_cl√©_api_ici" > .env

# 3. OU d√©finir la variable d'environnement directement
export GEMINI_API_KEY="votre_cl√©_api_ici"
```

### üìÅ Fichiers requis

Assurez-vous que les fichiers suivants sont pr√©sents dans votre projet :

**Essentiels :**
- ‚úÖ `app.py` - Application Flask principale avec IA
- ‚úÖ `app_demo.py` - Application Flask en mode d√©mo (sans PyTorch)
- ‚úÖ `best_brain_tumor_model.pth` - Mod√®le PyTorch entra√Æn√© (280MB)
- ‚úÖ `neuroscan_analytics.db` - Base de donn√©es SQLite (cr√©√©e automatiquement)

**Scripts :**
- ‚úÖ `start_demo.sh` - Script de d√©marrage rapide mode d√©mo
- ‚úÖ `install_pytorch.sh` - Script d'installation PyTorch automatique

**Configuration :**
- ‚úÖ `requirements.txt` - Liste compl√®te des d√©pendances
- ‚úÖ `requirements_basic.txt` - D√©pendances minimales pour le mode d√©mo

**Dossiers :**
- ‚úÖ `templates/` - Templates HTML de l'interface
- ‚úÖ `static/` - Fichiers CSS, JS, et images
- ‚úÖ `uploads/` - Dossier pour les images upload√©es (cr√©√© auto)
- ‚úÖ `test_images/` - Images de test pour d√©mo (cr√©√© auto)

### ‚ö†Ô∏è D√©pannage de l'installation

**Probl√®me : PyTorch trop volumineux**
```bash
# Solution : Installer la version CPU plus l√©g√®re
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu
```

**Probl√®me : Erreur de permissions**
```bash
# Solution : Utiliser --user
pip install --user nom_du_paquet
```

**Probl√®me : ModuleNotFoundError**
```bash
# Solution : V√©rifier que l'environnement virtuel est activ√©
which python3  # Devrait pointer vers venv/bin/python3
```

**Probl√®me : Port 5000 d√©j√† utilis√©**
```bash
# Solution : Changer le port dans app.py
app.run(debug=True, host='0.0.0.0', port=5001)
```


## üéÆ Utilisation

### üîê Authentification et acc√®s

#### Cr√©ation de compte m√©decin
1. Acc√©dez √† http://localhost:5000
2. Cliquez sur **"S'inscrire"** ou allez sur `/register`
3. Remplissez le formulaire :
   - Nom complet
   - Email professionnel
   - Sp√©cialit√© m√©dicale
   - Num√©ro de licence
   - Mot de passe s√©curis√©
4. Validez et connectez-vous

#### Connexion
1. Allez sur `/login`
2. Entrez votre email et mot de passe
3. Les sessions sont persist√©es (cookies s√©curis√©s)
4. Routes priv√©es n√©cessitent une authentification

### üöÄ D√©marrage de l'application

#### Mode d√©mo (sans PyTorch)
```bash
# D√©marrage rapide pour tester l'interface
./start_demo.sh

# L'application sera disponible sur http://localhost:5000
```

**Caract√©ristiques du mode d√©mo :**
- ‚ö° D√©marrage instantan√© (pas de chargement de mod√®le)
- üé≤ Pr√©dictions al√©atoires simul√©es (pour tests UI)
- üìä Toutes les fonctionnalit√©s UI disponibles
- üíæ Base de donn√©es fonctionnelle
- üé® Id√©al pour d√©veloppement frontend

#### Mode complet avec IA
```bash
# Activer l'environnement virtuel
source venv/bin/activate

# Lancer l'application avec le mod√®le PyTorch
python3 app.py

# Acc√©der √† http://localhost:5000
```

**Caract√©ristiques du mode complet :**
- üß† Mod√®le PyTorch CNN r√©el charg√©
- üéØ Pr√©dictions pr√©cises (99.7% accuracy)
- ‚è±Ô∏è Analyse en ~2-3 secondes
- üìà Scores de confiance fiables
- üî¨ Recommandations cliniques pertinentes

### üí¨ Utilisation du Chatbot Gemini

1. **Acc√®s** : Cliquez sur l'ic√¥ne de chatbot üí¨ en bas √† droite de la page d'accueil
2. **Questions accept√©es** :
   - "Quelles sont les fonctionnalit√©s de NeuroScan ?"
   - "Comment fonctionne l'analyse d'IRM ?"
   - "Quels types de tumeurs pouvez-vous d√©tecter ?"
   - "Comment cr√©er un compte m√©decin ?"
   - "Quelle est la pr√©cision du mod√®le ?"

3. **Questions refus√©es** :
   - ‚ùå "J'ai mal √† la t√™te, est-ce grave ?"
   - ‚ùå "Quels sont les sympt√¥mes d'une tumeur ?"
   - ‚ùå Questions m√©dicales g√©n√©rales non li√©es au projet

4. **Fonctionnalit√©s** :
   - R√©ponses contextuelles intelligentes
   - Historique de conversation pendant la session
   - Interface moderne et responsive
   - Animation fluide d'ouverture/fermeture

### üìã Workflow complet d'analyse

#### √âtape 1 : Connexion
```
http://localhost:5000 ‚Üí Cliquez "Se connecter" ‚Üí Entrez identifiants
```

#### √âtape 2 : Dashboard
```
Apr√®s connexion ‚Üí Tableau de bord m√©decin
```
Vue d'ensemble :
- üìä Statistiques personnelles (nombre de patients, analyses)
- üîî Alertes r√©centes
- üìà Graphiques d'activit√©
- üîó Acc√®s rapide aux fonctionnalit√©s

#### √âtape 3 : Upload et analyse d'une IRM

1. **Acc√©der √† l'upload**
   ```
   Dashboard ‚Üí "Nouvelle analyse" ou /upload
   ```

2. **Remplir le formulaire**
   - üÜî **ID Patient** : Identifiant unique (ex: PAT001)
   - üë§ **Nom du patient** : Nom complet
   - üìÖ **Date d'examen** : Date de l'IRM
   - üìÅ **Fichier image** : S√©lectionner l'IRM (DICOM, NIfTI, JPEG, PNG)

3. **Lancer l'analyse**
   - Cliquez sur "Analyser"
   - ‚è≥ Attente de 2-3 secondes
   - ‚úÖ R√©sultats affich√©s

4. **R√©sultats obtenus**
   ```json
   {
     "prediction": "Gliome",
     "confidence": 0.89,
     "probabilities": {
       "Normal": 0.05,
       "Gliome": 0.89,
       "M√©ningiome": 0.04,
       "Tumeur pituitaire": 0.02
     },
     "is_tumor": true,
     "recommendations": [
       "Consultation neurochirurgicale urgente recommand√©e",
       "IRM de suivi dans 2 semaines",
       "Biopsie st√©r√©otaxique √† envisager"
     ]
   }
   ```

5. **Actions post-analyse**
   - üì• T√©l√©charger le rapport PDF
   - üíæ Sauvegarder dans le dossier patient
   - üîî Cr√©er une alerte si n√©cessaire
   - üìß Partager avec d'autres m√©decins

#### √âtape 4 : Gestion des patients

1. **Liste des patients**
   ```
   Dashboard ‚Üí "Mes patients" ou /patients
   ```

2. **Cr√©er un nouveau patient**
   ```
   /new_patient ‚Üí Remplir formulaire ‚Üí Enregistrer
   ```
   Informations requises :
   - Identifiant patient
   - Nom complet
   - Date de naissance
   - Genre
   - Groupe sanguin
   - Contact d'urgence
   - Ant√©c√©dents m√©dicaux

3. **Modifier un patient**
   ```
   /patients ‚Üí Cliquer sur patient ‚Üí "Modifier" ‚Üí /edit_patient/<id>
   ```

#### √âtape 5 : Profil patient PRO

Acc√®s : `/patient/<patient_id>`

**Sections disponibles :**

1. **üìá Carte patient**
   - Avatar et informations cl√©s
   - Badge de risque (vert/orange/rouge)
   - Dates de premi√®re et derni√®re analyse
   - Nombre total d'analyses

2. **üìä KPIs (Indicateurs cl√©s)**
   - Total analyses effectu√©es
   - Nombre d'analyses normales
   - Nombre d'analyses anormales
   - Score de confiance moyen

3. **üìà Onglet √âvolution**
   - Graphique Chart.js de l'√©volution de la confiance
   - Axe X : Dates des analyses
   - Axe Y : Pourcentage de confiance (0-100%)
   - Courbe interactive avec tooltips

4. **üìã Onglet Analyses**
   - Tableau complet de toutes les analyses
   - Colonnes : Date, Diagnostic, Confiance, Image
   - Tri et filtrage possibles
   - Liens vers les images d'origine

5. **üìù Onglet Notes**
   - Description du patient
   - Recommandations m√©dicales
   - Suivi th√©rapeutique
   - Observations cliniques

6. **‚ö° Actions rapides**
   - üì• **Exporter JSON** : T√©l√©charger toutes les donn√©es
   - ‚ûï **Nouvelle analyse** : Upload direct depuis le profil
   - üîÑ **Rafra√Æchir** : Mettre √† jour les donn√©es

#### √âtape 6 : Alertes m√©dicales

Acc√®s : `/alerts`

**Types d'alertes :**
- üî¥ **Haute priorit√©** : Tumeurs d√©tect√©es
- üü† **Moyenne priorit√©** : Anomalies suspectes
- üü¢ **Basse priorit√©** : Examens de contr√¥le

**Actions sur les alertes :**
- Marquer comme lue/non lue
- Filtrer par priorit√©
- Rechercher par patient
- Archiver les anciennes alertes

### üìä Analytics et statistiques

#### Dashboard Pro (`/pro-dashboard`)
- Vue m√©decin personnelle
- Statistiques de vos patients
- Graphiques de r√©partition des diagnostics
- √âvolution temporelle de vos analyses

#### Dashboard Avanc√© (`/pro-dashboard-advanced`)
- M√©triques d√©taill√©es
- Comparaisons inter-p√©riodes
- Taux de d√©tection par type de tumeur
- Performance du mod√®le IA

#### Stats Plateforme (`/platform-stats`)
- Vue globale de tous les m√©decins
- Agr√©gation des analyses totales
- Top m√©decins par activit√©
- Statistiques de la plateforme

### üîç Conseils d'utilisation

**Pour de meilleurs r√©sultats :**
1. ‚úÖ Utilisez des images IRM de bonne qualit√© (r√©solution ‚â• 512x512)
2. ‚úÖ Renseignez toujours l'ID patient et la date d'examen
3. ‚úÖ Consultez l'historique avant une nouvelle analyse
4. ‚úÖ Exportez r√©guli√®rement les donn√©es des patients
5. ‚úÖ V√©rifiez les alertes quotidiennement

**Bonnes pratiques :**
- üìÖ Planifiez des examens de suivi r√©guliers
- üìù Documentez les observations dans les notes
- üîî Configurez les alertes pour les cas critiques
- üíæ Sauvegardez la base de donn√©es r√©guli√®rement
- üîí D√©connectez-vous apr√®s chaque session

### üõë Arr√™t de l'application

```bash
# Dans le terminal o√π l'application tourne
Ctrl + C

# D√©sactiver l'environnement virtuel
deactivate
```


## üèóÔ∏è Architecture technique

### üß† Mod√®le d'Intelligence Artificielle

#### Architecture CNN (Convolutional Neural Network)

Le mod√®le `BrainTumorCNN` utilise une architecture profonde optimis√©e pour la classification d'images IRM :

```python
class BrainTumorCNN(nn.Module):
    def __init__(self):
        super(BrainTumorCNN, self).__init__()
        
        # Couche 1 : Extraction de caract√©ristiques basiques
        self.conv1 = nn.Conv2d(3, 32, kernel_size=3, padding=1)
        self.bn1 = nn.BatchNorm2d(32)
        self.pool1 = nn.MaxPool2d(2, 2)  # 224 ‚Üí 112
        
        # Couche 2 : Caract√©ristiques de niveau moyen
        self.conv2 = nn.Conv2d(32, 64, kernel_size=3, padding=1)
        self.bn2 = nn.BatchNorm2d(64)
        self.pool2 = nn.MaxPool2d(2, 2)  # 112 ‚Üí 56
        
        # Couche 3 : Caract√©ristiques complexes
        self.conv3 = nn.Conv2d(64, 128, kernel_size=3, padding=1)
        self.bn3 = nn.BatchNorm2d(128)
        self.pool3 = nn.MaxPool2d(2, 2)  # 56 ‚Üí 28
        
        # Couche 4 : Patterns avanc√©s
        self.conv4 = nn.Conv2d(128, 256, kernel_size=3, padding=1)
        self.bn4 = nn.BatchNorm2d(256)
        self.pool4 = nn.MaxPool2d(2, 2)  # 28 ‚Üí 14
        
        # Couche 5 : Caract√©ristiques de haut niveau
        self.conv5 = nn.Conv2d(256, 512, kernel_size=3, padding=1)
        self.bn5 = nn.BatchNorm2d(512)
        self.pool5 = nn.MaxPool2d(2, 2)  # 14 ‚Üí 7
        
        # Couches fully connected
        self.fc1 = nn.Linear(512 * 7 * 7, 512)
        self.dropout1 = nn.Dropout(0.5)
        self.fc2 = nn.Linear(512, 256)
        self.dropout2 = nn.Dropout(0.3)
        self.fc3 = nn.Linear(256, 4)  # 4 classes de sortie
```

**Caract√©ristiques techniques :**
- **Entr√©e** : Images RGB 224x224 pixels
- **5 blocs convolutionnels** : Extraction hi√©rarchique de features
- **Batch Normalization** : Stabilisation de l'entra√Ænement
- **MaxPooling** : R√©duction dimensionnelle progressive
- **3 couches FC** : Classification finale
- **Dropout (50% et 30%)** : R√©gularisation contre l'overfitting
- **Sortie** : 4 neurones (softmax pour probabilit√©s)

#### Pipeline de pr√©traitement

```python
transform = transforms.Compose([
    transforms.Resize((224, 224)),           # Redimensionnement standard
    transforms.ToTensor(),                   # Conversion en tensor PyTorch
    transforms.Normalize(                    # Normalisation ImageNet
        mean=[0.485, 0.456, 0.406],
        std=[0.229, 0.224, 0.225]
    )
])
```

#### M√©triques de performance

| M√©trique | Valeur | Description |
|----------|--------|-------------|
| **Accuracy** | 99.7% | Pr√©cision globale sur le test set |
| **Precision** | 98.9% | Taux de vrais positifs |
| **Recall** | 99.1% | Sensibilit√© de d√©tection |
| **F1-Score** | 99.0% | Moyenne harmonique |
| **AUC-ROC** | 0.998 | Aire sous la courbe ROC |

### üóÑÔ∏è Architecture de la base de donn√©es

#### Sch√©ma SQLite (`neuroscan_analytics.db`)

```sql
-- Table des m√©decins
CREATE TABLE doctors (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    full_name TEXT NOT NULL,
    specialty TEXT,
    license_number TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Table des patients
CREATE TABLE patients (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT UNIQUE NOT NULL,
    name TEXT NOT NULL,
    date_of_birth DATE,
    gender TEXT,
    blood_type TEXT,
    emergency_contact TEXT,
    medical_history TEXT,
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);

-- Table des analyses
CREATE TABLE analyses (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT NOT NULL,
    patient_name TEXT,
    exam_date DATE,
    image_path TEXT,
    prediction TEXT NOT NULL,
    confidence REAL NOT NULL,
    probabilities TEXT,  -- JSON
    is_tumor BOOLEAN,
    recommendations TEXT,  -- JSON
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);

-- Table des alertes m√©dicales
CREATE TABLE medical_alerts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT NOT NULL,
    patient_name TEXT,
    alert_type TEXT NOT NULL,
    priority TEXT NOT NULL,  -- 'high', 'medium', 'low'
    message TEXT NOT NULL,
    is_read BOOLEAN DEFAULT 0,
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);

-- Table des statistiques quotidiennes
CREATE TABLE daily_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date DATE NOT NULL,
    total_analyses INTEGER DEFAULT 0,
    tumor_detected INTEGER DEFAULT 0,
    normal_scans INTEGER DEFAULT 0,
    doctor_id INTEGER,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);

-- Table des sessions Flask
CREATE TABLE sessions (
    session_id TEXT PRIMARY KEY,
    data BLOB,
    expiry TIMESTAMP
);
```

**Relations :**
- 1 m√©decin ‚Üí N patients (One-to-Many)
- 1 m√©decin ‚Üí N analyses (One-to-Many)
- 1 patient ‚Üí N analyses (One-to-Many)
- 1 m√©decin ‚Üí N alertes (One-to-Many)

### üåê Architecture API REST

#### Endpoints disponibles

##### üìç Pages publiques
```
GET  /                    # Page d'accueil
GET  /login              # Connexion
POST /login              # Authentification
GET  /register           # Inscription
POST /register           # Cr√©ation de compte
GET  /logout             # D√©connexion
```

##### üìç Pages prot√©g√©es (authentification requise)
```
GET  /dashboard                        # Tableau de bord m√©decin
GET  /upload                           # Page d'upload
POST /upload                           # Analyse d'image
GET  /patients                         # Liste des patients
GET  /new_patient                      # Formulaire nouveau patient
POST /new_patient                      # Cr√©ation patient
GET  /patient/<patient_id>             # Profil patient PRO
GET  /edit_patient/<patient_id>        # √âdition patient
POST /edit_patient/<patient_id>        # Mise √† jour patient
GET  /alerts                           # Alertes m√©dicales
GET  /pro-dashboard                    # Dashboard analytics
GET  /pro-dashboard-advanced           # Dashboard avanc√©
GET  /platform-stats                   # Statistiques plateforme
```

##### üìç API JSON Endpoints
```
GET  /health                                      # Health check
GET  /api/my-patients                             # Patients du m√©decin
GET  /api/patients/<patient_id>/detailed-history  # Historique + m√©triques
GET  /api/patients/<patient_id>/comparison        # Comparaison analyses
GET  /api/evolution/summary                       # R√©sum√© √©volutions
GET  /api/analytics/overview                      # Stats personnelles m√©decin
GET  /api/analytics/platform-overview             # Stats globales plateforme
GET  /api/analytics/filter-counts                 # Compteurs pour filtres
POST /api/analytics/filter-preview                # Pr√©visualisation filtres
POST /api/chatbot                                 # Chatbot Gemini API
```

### üé® Architecture Frontend

#### Structure des templates

```
templates/
‚îú‚îÄ‚îÄ base_dashboard.html          # Layout de base unifi√©
‚îú‚îÄ‚îÄ index.html                   # Page d'accueil + chatbot
‚îú‚îÄ‚îÄ dashboard.html               # Dashboard m√©decin
‚îú‚îÄ‚îÄ patients_list.html           # Liste patients
‚îú‚îÄ‚îÄ patient_profile_pro.html     # Profil patient (PRO)
‚îú‚îÄ‚îÄ new_patient.html             # Cr√©ation patient
‚îú‚îÄ‚îÄ edit_patient.html            # √âdition patient
‚îú‚îÄ‚îÄ new_analysis.html            # Upload et analyse
‚îú‚îÄ‚îÄ alerts.html                  # Alertes m√©dicales
‚îú‚îÄ‚îÄ pro_dashboard.html           # Dashboard analytics
‚îú‚îÄ‚îÄ pro_dashboard_advanced.html  # Dashboard avanc√©
‚îú‚îÄ‚îÄ platform_stats.html          # Stats plateforme
‚îî‚îÄ‚îÄ auth/
    ‚îú‚îÄ‚îÄ login.html               # Connexion
    ‚îî‚îÄ‚îÄ register.html            # Inscription
```

#### Organisation des assets

```
static/
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.css             # Framework CSS principal
‚îÇ   ‚îú‚îÄ‚îÄ dashboard-unified.css    # Styles dashboard
‚îÇ   ‚îú‚îÄ‚îÄ index.css                # Page d'accueil
‚îÇ   ‚îú‚îÄ‚îÄ neuroscan-modern.css     # Th√®me g√©n√©ral
‚îÇ   ‚îú‚îÄ‚îÄ chatbot_visitor.css      # Styles chatbot
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ index.js                 # Logic page d'accueil
‚îÇ   ‚îú‚îÄ‚îÄ base_dashboard.js        # Logic dashboard
‚îÇ   ‚îú‚îÄ‚îÄ neuroscan-modern.js      # Interactions g√©n√©rales
‚îÇ   ‚îú‚îÄ‚îÄ visitor_chatbot.js       # Logic chatbot Gemini
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ images/
    ‚îî‚îÄ‚îÄ ...                      # Logos, ic√¥nes, avatars
```

### üîÑ Flux de donn√©es

#### Processus d'analyse d'une IRM

```
1. Upload fichier (Frontend)
   ‚Üì
2. Validation format (Flask)
   ‚Üì
3. Sauvegarde temporaire (uploads/)
   ‚Üì
4. Pr√©traitement image (PIL + transforms)
   ‚Üì
5. Inf√©rence mod√®le PyTorch (CNN)
   ‚Üì
6. Post-traitement r√©sultats
   ‚Üì
7. G√©n√©ration recommandations
   ‚Üì
8. Sauvegarde en base de donn√©es
   ‚Üì
9. Cr√©ation alerte si n√©cessaire
   ‚Üì
10. Retour JSON au frontend
   ‚Üì
11. Affichage r√©sultats (Chart.js)
```

#### Session et authentification

```python
# Flask-Session avec SQLite backend
app.config['SESSION_TYPE'] = 'sqlalchemy'
app.config['SESSION_SQLALCHEMY'] = db
app.config['SESSION_PERMANENT'] = False
app.config['SESSION_USE_SIGNER'] = True
app.config['SESSION_KEY_PREFIX'] = 'neuroscan:'

# Protection des routes
@app.route('/dashboard')
def dashboard():
    if 'doctor_id' not in session:
        return redirect(url_for('login'))
    # ...
```

### ü§ñ Chatbot Gemini - Architecture

#### Syst√®me de contexte intelligent

```python
# Contexte pr√©d√©fini sur le projet NeuroScan
NEUROSCAN_CONTEXT = """
NeuroScan est une plateforme d'analyse IA de tumeurs c√©r√©brales.
Fonctionnalit√©s:
- Analyse IRM avec CNN PyTorch (99.7% pr√©cision)
- D√©tection: Gliome, M√©ningiome, Tumeur pituitaire
- Gestion patients et historique
- Dashboard analytics et alertes
- Formats: DICOM, NIfTI, JPEG, PNG
"""

# Filtrage intelligent des questions
def is_medical_question(question):
    medical_keywords = [
        'sympt√¥me', 'traitement', 'diagnostic', 
        'maladie', 'soigner', 'm√©dicament'
    ]
    return any(kw in question.lower() for kw in medical_keywords)
```

#### Prompt Engineering

```python
prompt = f"""Tu es un assistant virtuel pour NeuroScan uniquement.

CONTEXTE: {NEUROSCAN_CONTEXT}

R√àGLES STRICTES:
1. R√©ponds UNIQUEMENT sur NeuroScan et ses fonctionnalit√©s
2. REFUSE toute question m√©dicale g√©n√©rale
3. Sois concis et professionnel
4. Guide vers les fonctionnalit√©s appropri√©es

Question: {user_message}
"""
```

### ‚ö° Optimisations et performances

- **Lazy Loading** : Chargement du mod√®le PyTorch au premier usage
- **Caching** : Mise en cache des r√©sultats fr√©quents
- **Compression** : Images optimis√©es avant stockage
- **Indexation DB** : Index sur patient_id, doctor_id, dates
- **Async Ready** : Pr√©par√© pour Flask-SocketIO si n√©cessaire


## üîå API Endpoints

### üìÑ Documentation compl√®te des endpoints

#### üè† Pages publiques

##### `GET /`
**Page d'accueil avec chatbot Gemini**

- **Description** : Page principale du site avec pr√©sentation et chatbot int√©gr√©
- **Authentification** : Non requise
- **R√©ponse** : HTML template `index.html`
- **Fonctionnalit√©s** :
  - Pr√©sentation de NeuroScan
  - Widget chatbot en bas √† droite
  - Liens vers inscription/connexion

##### `GET /login`
**Page de connexion**

- **M√©thode** : GET, POST
- **Param√®tres POST** :
  ```json
  {
    "email": "medecin@example.com",
    "password": "mot_de_passe"
  }
  ```
- **R√©ponse succ√®s** : Redirection vers `/dashboard`
- **R√©ponse erreur** : Message d'erreur + retour formulaire

##### `GET /register`
**Page d'inscription**

- **M√©thode** : GET, POST
- **Param√®tres POST** :
  ```json
  {
    "email": "nouveau@example.com",
    "password": "mot_de_passe_securise",
    "full_name": "Dr. Jean Dupont",
    "specialty": "Neurologie",
    "license_number": "123456"
  }
  ```
- **Validation** :
  - Email unique
  - Mot de passe ‚â• 8 caract√®res
  - Tous les champs requis

##### `GET /logout`
**D√©connexion**

- **Description** : Supprime la session et redirige vers `/`
- **M√©thode** : GET
- **Authentification** : Requise

---

#### üîí Pages prot√©g√©es (Dashboard & Gestion)

##### `GET /dashboard`
**Tableau de bord m√©decin**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** : HTML template `dashboard.html`
- **Donn√©es incluses** :
  ```json
  {
    "doctor_name": "Dr. Jean Dupont",
    "total_patients": 42,
    "total_analyses": 156,
    "recent_alerts": [...],
    "recent_analyses": [...]
  }
  ```

##### `POST /upload`
**Upload et analyse d'une image IRM**

- **Authentification** : ‚úÖ Requise
- **Content-Type** : `multipart/form-data`
- **Param√®tres** :
  ```
  file: File (DICOM, NIfTI, JPEG, PNG)
  patient_id: String (ex: "PAT001")
  patient_name: String (ex: "Marie Martin")
  exam_date: Date (ex: "2025-10-05")
  ```
- **Taille max** : 16MB
- **R√©ponse succ√®s** :
  ```json
  {
    "success": true,
    "image_url": "data:image/jpeg;base64,/9j/4AAQSkZJRg...",
    "prediction": "Gliome",
    "confidence": 0.8934,
    "probabilities": {
      "Normal": 0.0521,
      "Gliome": 0.8934,
      "M√©ningiome": 0.0423,
      "Tumeur pituitaire": 0.0122
    },
    "is_tumor": true,
    "recommendations": [
      "Consultation neurochirurgicale urgente recommand√©e",
      "IRM de suivi dans 2 semaines",
      "Biopsie st√©r√©otaxique √† envisager",
      "√âvaluation des fonctions cognitives"
    ]
  }
  ```
- **R√©ponse erreur** :
  ```json
  {
    "success": false,
    "error": "Format de fichier non support√©"
  }
  ```

##### `GET /patients`
**Liste des patients du m√©decin**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** : HTML template `patients_list.html`
- **Fonctionnalit√©s** :
  - Recherche par nom/ID
  - Tri par date
  - Filtrage par statut

##### `GET /patient/<patient_id>`
**Profil patient d√©taill√© (Interface PRO)**

- **Authentification** : ‚úÖ Requise
- **Param√®tre** : `patient_id` (String, ex: "PAT001")
- **R√©ponse** : HTML template `patient_profile_pro.html`
- **Donn√©es incluses** :
  ```json
  {
    "patient": {
      "id": "PAT001",
      "name": "Marie Martin",
      "date_of_birth": "1985-06-15",
      "gender": "F",
      "blood_type": "O+"
    },
    "analyses": [
      {
        "date": "2025-10-05",
        "prediction": "Gliome",
        "confidence": 0.89,
        "image_path": "uploads/image1.jpg"
      }
    ],
    "stats": {
      "total": 10,
      "normal": 3,
      "abnormal": 7,
      "avg_confidence": 0.85
    }
  }
  ```

##### `POST /new_patient`
**Cr√©ation d'un nouveau patient**

- **Authentification** : ‚úÖ Requise
- **Param√®tres** :
  ```json
  {
    "patient_id": "PAT042",
    "name": "Jean Durand",
    "date_of_birth": "1990-03-20",
    "gender": "M",
    "blood_type": "A+",
    "emergency_contact": "+33612345678",
    "medical_history": "Aucun ant√©c√©dent notable"
  }
  ```

##### `GET /alerts`
**Alertes m√©dicales**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** : HTML template `alerts.html`
- **Filtres disponibles** :
  - Priorit√© (high/medium/low)
  - Lu/Non lu
  - Date

---

#### üìä API JSON Endpoints

##### `GET /health`
**Health check de l'application**

- **Authentification** : Non requise
- **R√©ponse** :
  ```json
  {
    "status": "healthy",
    "model_loaded": true,
    "database": "connected",
    "timestamp": "2025-10-05T14:30:00Z"
  }
  ```

##### `GET /api/my-patients`
**Liste JSON des patients du m√©decin**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** :
  ```json
  {
    "success": true,
    "count": 42,
    "patients": [
      {
        "patient_id": "PAT001",
        "name": "Marie Martin",
        "total_analyses": 5,
        "last_analysis_date": "2025-10-05",
        "risk_level": "high"
      }
    ]
  }
  ```

##### `GET /api/patients/<patient_id>/detailed-history`
**Historique d√©taill√© + m√©triques d'un patient**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** :
  ```json
  {
    "patient_id": "PAT001",
    "history": [
      {
        "date": "2025-10-05",
        "prediction": "Gliome",
        "confidence": 0.89
      }
    ],
    "metrics": {
      "total_analyses": 10,
      "tumor_rate": 0.7,
      "avg_confidence": 0.85,
      "trend": "stable"
    }
  }
  ```

##### `GET /api/patients/<patient_id>/comparison`
**Comparaison des 2 derni√®res analyses**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** :
  ```json
  {
    "current": {
      "date": "2025-10-05",
      "prediction": "Gliome",
      "confidence": 0.89
    },
    "previous": {
      "date": "2025-09-20",
      "prediction": "Gliome",
      "confidence": 0.82
    },
    "evolution": {
      "confidence_change": +0.07,
      "status": "worsening"
    }
  }
  ```

##### `GET /api/analytics/overview`
**Statistiques personnelles du m√©decin**

- **Authentification** : ‚úÖ Requise
- **R√©ponse** :
  ```json
  {
    "total_patients": 42,
    "total_analyses": 156,
    "this_month": 23,
    "tumor_detection_rate": 0.45,
    "by_type": {
      "Normal": 86,
      "Gliome": 42,
      "M√©ningiome": 20,
      "Tumeur pituitaire": 8
    }
  }
  ```

##### `GET /api/analytics/platform-overview`
**Statistiques globales de la plateforme**

- **Authentification** : ‚úÖ Requise (admin)
- **R√©ponse** :
  ```json
  {
    "total_doctors": 15,
    "total_patients": 450,
    "total_analyses": 1853,
    "global_tumor_rate": 0.42,
    "most_active_doctor": "Dr. Jean Dupont"
  }
  ```

##### `POST /api/chatbot`
**Endpoint du chatbot Gemini**

- **Authentification** : Non requise
- **Content-Type** : `application/json`
- **Param√®tres** :
  ```json
  {
    "message": "Quelles sont les fonctionnalit√©s de NeuroScan ?"
  }
  ```
- **R√©ponse succ√®s** :
  ```json
  {
    "success": true,
    "response": "NeuroScan offre plusieurs fonctionnalit√©s cl√©s : analyse IA d'images IRM avec d√©tection automatique de tumeurs c√©r√©brales, gestion compl√®te des dossiers patients, tableaux de bord analytics, syst√®me d'alertes m√©dicales, et support de multiples formats d'images (DICOM, NIfTI, JPEG, PNG).",
    "timestamp": "2025-10-05T14:30:00Z"
  }
  ```
- **R√©ponse refus (question m√©dicale)** :
  ```json
  {
    "success": false,
    "response": "Je suis d√©sol√©, mais je ne peux r√©pondre qu'aux questions concernant le projet NeuroScan et ses fonctionnalit√©s. Pour des questions m√©dicales, veuillez consulter un professionnel de sant√©.",
    "reason": "medical_question_detected"
  }
  ```
- **R√©ponse erreur** :
  ```json
  {
    "success": false,
    "error": "API Gemini indisponible"
  }
  ```

---

### üîê Codes de r√©ponse HTTP

| Code | Signification | Cas d'usage |
|------|---------------|-------------|
| 200 | OK | Requ√™te r√©ussie |
| 201 | Created | Ressource cr√©√©e (nouveau patient) |
| 400 | Bad Request | Param√®tres invalides |
| 401 | Unauthorized | Non authentifi√© |
| 403 | Forbidden | Pas les droits d'acc√®s |
| 404 | Not Found | Ressource introuvable |
| 413 | Payload Too Large | Fichier > 16MB |
| 500 | Internal Server Error | Erreur serveur |

### üìù Exemples d'utilisation avec cURL

#### Upload et analyse
```bash
curl -X POST http://localhost:5000/upload \
  -H "Cookie: session=..." \
  -F "file=@brain_scan.jpg" \
  -F "patient_id=PAT001" \
  -F "patient_name=Marie Martin" \
  -F "exam_date=2025-10-05"
```

#### R√©cup√©rer les patients
```bash
curl -X GET http://localhost:5000/api/my-patients \
  -H "Cookie: session=..."
```

#### Chatbot
```bash
curl -X POST http://localhost:5000/api/chatbot \
  -H "Content-Type: application/json" \
  -d '{"message": "Comment fonctionne NeuroScan ?"}'
```

### üîÑ Rate Limiting

Actuellement **non impl√©ment√©**, mais recommand√© pour production :
- 100 requ√™tes/minute par IP pour les endpoints publics
- 1000 requ√™tes/heure pour les utilisateurs authentifi√©s
- 10 requ√™tes/minute pour le chatbot par session


## üîí S√©curit√© et limitations

### ‚ö†Ô∏è AVERTISSEMENT IMPORTANT

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ö†Ô∏è  CETTE APPLICATION EST DESTIN√âE √Ä DES FINS             ‚îÇ
‚îÇ      √âDUCATIVES ET DE RECHERCHE UNIQUEMENT                  ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚ùå  NE PAS UTILISER POUR DES DIAGNOSTICS M√âDICAUX R√âELS   ‚îÇ
‚îÇ      SANS VALIDATION PAR DES PROFESSIONNELS QUALIFI√âS      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

NeuroScan est un projet de d√©monstration de l'application de l'IA dans le domaine m√©dical. Bien que le mod√®le atteigne une pr√©cision de 99.7% sur le dataset de test, il ne remplace en aucun cas l'expertise d'un radiologue ou d'un neurologue qualifi√©.

---

### üîê Mesures de s√©curit√© impl√©ment√©es

#### Authentification
- ‚úÖ **Mots de passe hash√©s** : Utilisation de `werkzeug.security` avec pbkdf2:sha256
- ‚úÖ **Sessions s√©curis√©es** : Flask-Session avec stockage SQLite
- ‚úÖ **Cookies HttpOnly** : Protection contre XSS
- ‚úÖ **Session timeout** : Expiration automatique apr√®s inactivit√©
- ‚úÖ **Protection CSRF** : √Ä activer avec Flask-WTF en production

#### Validation des entr√©es
- ‚úÖ **Validation de formats** : V√©rification des extensions de fichiers
- ‚úÖ **Taille maximale** : Limite de 16MB par fichier
- ‚úÖ **Sanitization** : Nettoyage des donn√©es utilisateur
- ‚úÖ **SQL param√©tris√©** : Protection contre injections SQL

#### Isolation des donn√©es
- ‚úÖ **S√©paration par m√©decin** : Chaque m√©decin voit uniquement ses patients
- ‚úÖ **Foreign keys** : Int√©grit√© r√©f√©rentielle en base de donn√©es
- ‚úÖ **V√©rification des permissions** : Contr√¥le d'acc√®s sur chaque route prot√©g√©e

#### S√©curit√© des fichiers
- ‚úÖ **Dossier uploads s√©curis√©** : Pas d'ex√©cution de scripts
- ‚úÖ **Validation MIME types** : V√©rification du type r√©el du fichier
- ‚úÖ **Noms de fichiers s√©curis√©s** : Utilisation de `secure_filename()`

---

### üöß Limitations techniques

#### Limitations du mod√®le IA
| Limitation | Description | Impact |
|------------|-------------|--------|
| **Dataset sp√©cifique** | Entra√Æn√© sur un dataset particulier | Peut avoir des biais |
| **Types limit√©s** | Seulement 4 cat√©gories | Ne d√©tecte pas tous les types de tumeurs |
| **Qualit√© d'image** | Sensible √† la qualit√© de l'IRM | R√©sultats moins fiables sur images floues |
| **R√©solution** | Optimis√© pour 224x224 | Perte de d√©tails sur grandes images |
| **Contraste** | N√©cessite un bon contraste | Difficult√©s sur images sous-expos√©es |

#### Limitations de l'application
| Limitation | Valeur | Raison |
|------------|--------|--------|
| **Taille fichier max** | 16 MB | Limite Flask par d√©faut |
| **Formats support√©s** | DICOM, NIfTI, JPEG, PNG | Librairies disponibles |
| **Utilisateurs simultan√©s** | ~50-100 | SQLite write lock |
| **Stockage images** | Disque local | Pas de cloud storage |
| **API rate limit** | Non impl√©ment√© | √Ä ajouter pour production |

#### Limitations cliniques
- ‚ö†Ô∏è **Pas de validation FDA/CE** : Non approuv√© pour usage clinique
- ‚ö†Ô∏è **Pas d'interpr√©tation 3D** : Analyse uniquement des coupes 2D
- ‚ö†Ô∏è **Pas de quantification** : Pas de mesure de taille de tumeur
- ‚ö†Ô∏è **Pas de suivi longitudinal automatique** : Comparaison manuelle
- ‚ö†Ô∏è **Pas d'export DICOM** : Seulement JSON et images simples

---

### üõ°Ô∏è Recommandations de s√©curit√© pour production

#### Configuration Flask
```python
# app.py - Configuration de production
app.config['SECRET_KEY'] = os.environ.get('SECRET_KEY', 'change-me-in-production')
app.config['SESSION_COOKIE_SECURE'] = True  # HTTPS uniquement
app.config['SESSION_COOKIE_HTTPONLY'] = True
app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(hours=2)
```

#### HTTPS obligatoire
```bash
# Utiliser un reverse proxy (Nginx, Apache)
# Obtenir un certificat SSL (Let's Encrypt)
sudo certbot --nginx -d votre-domaine.com
```

#### Variables d'environnement
```bash
# .env (NE JAMAIS COMMITER)
SECRET_KEY=votre_cl√©_secr√®te_al√©atoire_longue
GEMINI_API_KEY=votre_cl√©_gemini
DATABASE_URL=postgresql://user:pass@host/db
FLASK_ENV=production
```

#### Pare-feu et reverse proxy
```nginx
# nginx.conf
server {
    listen 443 ssl;
    server_name neuroscan.example.com;
    
    ssl_certificate /etc/letsencrypt/live/neuroscan.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/neuroscan.example.com/privkey.pem;
    
    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header Host $host;
    }
    
    # Rate limiting
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
    location /api/ {
        limit_req zone=api burst=20;
    }
}
```

#### Logging et monitoring
```python
# Configuration du logging
import logging
from logging.handlers import RotatingFileHandler

if not app.debug:
    file_handler = RotatingFileHandler('neuroscan.log', maxBytes=10240, backupCount=10)
    file_handler.setFormatter(logging.Formatter(
        '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
    ))
    file_handler.setLevel(logging.INFO)
    app.logger.addHandler(file_handler)
```

#### Sauvegarde automatique
```bash
# cron job pour backup quotidien
0 2 * * * /usr/bin/sqlite3 /path/to/neuroscan_analytics.db ".backup /backups/neuroscan_$(date +\%Y\%m\%d).db"
```

---

### üìã Checklist de s√©curit√©

Avant d√©ploiement en production :

- [ ] Changer `SECRET_KEY` avec une valeur al√©atoire forte
- [ ] Activer HTTPS avec certificat SSL valide
- [ ] Configurer un pare-feu (UFW, iptables)
- [ ] Impl√©menter rate limiting sur les endpoints sensibles
- [ ] Activer la protection CSRF avec Flask-WTF
- [ ] Configurer des logs d√©taill√©s et monitoring
- [ ] Mettre en place des sauvegardes automatiques
- [ ] Restreindre les permissions des fichiers (chmod 600 pour .db)
- [ ] D√©sactiver le mode debug Flask (`DEBUG=False`)
- [ ] Utiliser un serveur WSGI (Gunicorn, uWSGI) au lieu de Flask dev server
- [ ] Configurer un reverse proxy (Nginx, Apache)
- [ ] Limiter les connexions SSH au serveur
- [ ] Mettre √† jour r√©guli√®rement les d√©pendances Python
- [ ] Impl√©menter 2FA pour les comptes m√©decins
- [ ] Ajouter des audit logs pour la conformit√© RGPD/HIPAA

---

### ‚öñÔ∏è Conformit√© l√©gale

#### RGPD (Europe)
- üìù Donn√©es de sant√© = donn√©es sensibles
- üîí N√©cessite consentement explicite
- üìã Droit √† l'oubli et √† la portabilit√©
- üîê Chiffrement recommand√© au repos et en transit

#### HIPAA (USA)
- üè• Protected Health Information (PHI)
- üîí Contr√¥les d'acc√®s stricts requis
- üìä Audit trails obligatoires
- üîê Chiffrement requis

**Avant utilisation clinique r√©elle** : Consultez un avocat sp√©cialis√© en droit de la sant√© et obtenez les certifications n√©cessaires.

---

### üÜò Signalement de vuln√©rabilit√©s

Si vous d√©couvrez une faille de s√©curit√© :

1. **Ne pas** la divulguer publiquement
2. Contactez l'√©quipe en priv√© : security@neuroscan.example.com
3. Fournissez des d√©tails sur la reproduction
4. Laissez du temps pour un correctif avant disclosure

---

### üìö Ressources de s√©curit√©

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [Flask Security Best Practices](https://flask.palletsprojects.com/en/2.3.x/security/)
- [NIST Cybersecurity Framework](https://www.nist.gov/cyberframework)
- [HIPAA Security Rule](https://www.hhs.gov/hipaa/for-professionals/security/)
- [RGPD - CNIL](https://www.cnil.fr/fr/reglement-europeen-protection-donnees)


## üìÅ Structure du projet

### üå≥ Arborescence compl√®te

```
neuroscan-project/
‚îÇ
‚îú‚îÄ‚îÄ üìÑ app.py                              # Application Flask principale (avec PyTorch)
‚îú‚îÄ‚îÄ üìÑ app_demo.py                         # Application Flask mode d√©mo (sans PyTorch)
‚îú‚îÄ‚îÄ üß† best_brain_tumor_model.pth          # Mod√®le PyTorch entra√Æn√© (280MB)
‚îú‚îÄ‚îÄ üóÑÔ∏è neuroscan_analytics.db              # Base de donn√©es SQLite
‚îú‚îÄ‚îÄ üìÑ model.h5                            # Ancien mod√®le Keras (legacy)
‚îÇ
‚îú‚îÄ‚îÄ üìã requirements.txt                    # D√©pendances Python compl√®tes
‚îú‚îÄ‚îÄ üìã requirements_basic.txt              # D√©pendances minimales (mode d√©mo)
‚îú‚îÄ‚îÄ üìÑ README.md                           # Documentation compl√®te
‚îÇ
‚îú‚îÄ‚îÄ üöÄ start_demo.sh                       # Script d√©marrage mode d√©mo
‚îú‚îÄ‚îÄ üîß install_pytorch.sh                  # Script installation PyTorch
‚îú‚îÄ‚îÄ üêç create_test_image.py                # G√©n√©rateur d'images de test
‚îÇ
‚îú‚îÄ‚îÄ üìì brain-tumor-classification-pytorch-99-7-test.ipynb
‚îÇ                                          # Notebook entra√Ænement du mod√®le
‚îú‚îÄ‚îÄ üìì step-wise-approach-cnn-model-77-0344-accuracy.ipynb
‚îÇ                                          # Notebook approche it√©rative
‚îÇ
‚îú‚îÄ‚îÄ üìÇ templates/                          # Templates HTML (Jinja2)
‚îÇ   ‚îú‚îÄ‚îÄ üè† index.html                      # Page d'accueil + chatbot
‚îÇ   ‚îú‚îÄ‚îÄ üìä base_dashboard.html             # Layout de base unifi√©
‚îÇ   ‚îú‚îÄ‚îÄ üìà dashboard.html                  # Dashboard m√©decin
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üë• patients_list.html              # Liste des patients
‚îÇ   ‚îú‚îÄ‚îÄ ‚ûï new_patient.html                # Formulaire nouveau patient
‚îÇ   ‚îú‚îÄ‚îÄ ‚úèÔ∏è edit_patient.html               # √âdition patient
‚îÇ   ‚îú‚îÄ‚îÄ üíº patient_profile_pro.html        # Profil patient (Interface PRO)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üì§ new_analysis.html               # Upload et analyse d'IRM
‚îÇ   ‚îú‚îÄ‚îÄ üìã analysis_detail.html            # D√©tails d'une analyse
‚îÇ   ‚îú‚îÄ‚îÄ üìä res_analyse.html                # R√©sultats analyse
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üîî alerts.html                     # Alertes m√©dicales
‚îÇ   ‚îú‚îÄ‚îÄ üìà pro_dashboard.html              # Dashboard analytics
‚îÇ   ‚îú‚îÄ‚îÄ üìä pro_dashboard_advanced.html     # Dashboard avanc√©
‚îÇ   ‚îú‚îÄ‚îÄ üåç platform_stats.html             # Statistiques plateforme
‚îÇ   ‚îú‚îÄ‚îÄ üìâ tumor_tracking.html             # Suivi des tumeurs
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üë§ doctor_profile.html             # Profil m√©decin
‚îÇ   ‚îú‚îÄ‚îÄ üí¨ chat.html                       # Chat m√©dical (deprecated)
‚îÇ   ‚îú‚îÄ‚îÄ üí¨ chat_help.html                  # Chat d'aide
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üîê auth/                           # Authentification
‚îÇ       ‚îú‚îÄ‚îÄ login.html                     # Connexion
‚îÇ       ‚îî‚îÄ‚îÄ register.html                  # Inscription
‚îÇ
‚îú‚îÄ‚îÄ üìÇ static/                             # Fichiers statiques (CSS, JS, images)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üé® css/                            # Feuilles de style
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tailwind.css                   # Framework CSS principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tailwind.build.css             # Version compil√©e
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard-unified.css          # Styles dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ neuroscan-modern.css           # Th√®me g√©n√©ral moderne
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme-force-light.css          # For√ßage th√®me clair
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.css                      # Page d'accueil
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.css                      # Page connexion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.css                   # Page inscription
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manage_patients.css            # Gestion patients
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ new_patient.css                # Nouveau patient
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit_patient.css               # √âdition patient
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ res_analyse.css                # R√©sultats analyse
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alert.css                      # Alertes (ancien)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ alerts-modern.css              # Alertes moderne
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.css                       # Chat m√©dical
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_help.css                  # Chat d'aide
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ visitor_chatbot.css            # Chatbot visiteur Gemini
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üñºÔ∏è images/                         # Images et logos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo.png                       # Logo NeuroScan
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ brain-scan-bg.jpg              # Background page accueil
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatar-default.png             # Avatar par d√©faut
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                            # Autres assets
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üõ†Ô∏è js/                             # Scripts JavaScript
‚îÇ       ‚îú‚îÄ‚îÄ index.js                       # Logic page d'accueil
‚îÇ       ‚îú‚îÄ‚îÄ base_dashboard.js              # Logic dashboard commun
‚îÇ       ‚îú‚îÄ‚îÄ neuroscan-modern.js            # Interactions g√©n√©rales
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ login.js                       # Logic connexion
‚îÇ       ‚îú‚îÄ‚îÄ register.js                    # Logic inscription
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ manage_patients.js             # Gestion patients
‚îÇ       ‚îú‚îÄ‚îÄ new_patient.js                 # Nouveau patient
‚îÇ       ‚îú‚îÄ‚îÄ edit_patient.js                # √âdition patient
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ new_analyse.js                 # Upload et analyse
‚îÇ       ‚îú‚îÄ‚îÄ res_analyse.js                 # Affichage r√©sultats
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ alerts-modern.js               # Logic alertes
‚îÇ       ‚îú‚îÄ‚îÄ chat.js                        # Chat m√©dical
‚îÇ       ‚îú‚îÄ‚îÄ chat_help.js                   # Chat d'aide
‚îÇ       ‚îî‚îÄ‚îÄ visitor_chatbot.js             # Logic chatbot Gemini
‚îÇ
‚îú‚îÄ‚îÄ üìÇ uploads/                            # Images upload√©es (cr√©√© auto)
‚îÇ   ‚îú‚îÄ‚îÄ 1072_jpg.rf.45310adc3a3055067e841021aa27fd36.jpg
‚îÇ   ‚îú‚îÄ‚îÄ ISIC_0024318.jpg
‚îÇ   ‚îú‚îÄ‚îÄ Meningiome-olfactif.jpeg
‚îÇ   ‚îú‚îÄ‚îÄ oligodendroglioma_low_grade_high_fr.jpg
‚îÇ   ‚îú‚îÄ‚îÄ PAMJ-44-174-g002.jpg
‚îÇ   ‚îú‚îÄ‚îÄ Te-glTr_0000.jpg                   # Gliome test
‚îÇ   ‚îú‚îÄ‚îÄ Te-meTr_0003.jpg                   # M√©ningiome test
‚îÇ   ‚îú‚îÄ‚îÄ Te-noTr_0002.jpg                   # Normal test
‚îÇ   ‚îú‚îÄ‚îÄ Te-piTr_0000.jpg                   # Tumeur pituitaire test
‚îÇ   ‚îú‚îÄ‚îÄ test.jpg
‚îÇ   ‚îî‚îÄ‚îÄ test2.jpg
‚îÇ
‚îú‚îÄ‚îÄ üìÇ test_images/                        # Images de test g√©n√©r√©es
‚îÇ   ‚îú‚îÄ‚îÄ brain_normal.jpg                   # Cerveau normal simul√©
‚îÇ   ‚îî‚îÄ‚îÄ brain_with_tumor.jpg               # Cerveau avec tumeur simul√©e
‚îÇ
‚îú‚îÄ‚îÄ üìÇ venv/                               # Environnement virtuel Python
‚îÇ   ‚îú‚îÄ‚îÄ bin/                               # Ex√©cutables
‚îÇ   ‚îú‚îÄ‚îÄ lib/                               # Librairies Python
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ üìÇ __pycache__/                        # Cache Python (auto-g√©n√©r√©)
‚îÇ   ‚îî‚îÄ‚îÄ app.cpython-312.pyc
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .gitignore                          # Fichiers ignor√©s par Git
‚îú‚îÄ‚îÄ üìÑ .env                                # Variables d'environnement (ne pas commiter)
‚îî‚îÄ‚îÄ üìÑ LICENSE                             # Licence du projet
```

---

### üìä Taille des fichiers cl√©s

| Fichier | Taille | Description |
|---------|--------|-------------|
| `best_brain_tumor_model.pth` | ~280 MB | Mod√®le PyTorch entra√Æn√© |
| `neuroscan_analytics.db` | Variable | Base de donn√©es (grandit avec l'usage) |
| `venv/` | ~500 MB | Environnement virtuel complet |
| `templates/` | ~500 KB | Tous les templates HTML |
| `static/` | ~5 MB | CSS, JS, images |
| `uploads/` | Variable | Images upload√©es par les utilisateurs |

---

### üîç Fichiers importants

#### `app.py` - Application principale
```python
# Contient:
# - Configuration Flask et extensions
# - Mod√®le PyTorch BrainTumorCNN
# - Routes et endpoints API
# - Logique d'analyse IA
# - Gestion de la base de donn√©es
# - Syst√®me d'authentification
# - Chatbot Gemini integration
```

#### `app_demo.py` - Mode d√©mo
```python
# Version all√©g√©e sans PyTorch
# - Pr√©dictions al√©atoires simul√©es
# - M√™me interface et fonctionnalit√©s UI
# - Id√©al pour d√©veloppement frontend
# - D√©marrage instantan√©
```

#### `best_brain_tumor_model.pth` - Mod√®le IA
```
# Mod√®le PyTorch entra√Æn√©
# - Architecture: BrainTumorCNN (5 conv layers)
# - Input: 224x224x3 RGB images
# - Output: 4 classes (Normal, Gliome, M√©ningiome, Tumeur pituitaire)
# - Accuracy: 99.7% sur test set
# - Training: ~7000 images IRM annot√©es
```

#### `requirements.txt` - D√©pendances
```
Flask==2.3.0
torch==2.0.1
torchvision==0.15.2
Pillow==10.0.0
numpy==1.24.3
opencv-python==4.8.0
Werkzeug==2.3.0
google-generativeai==0.3.1
```

---

### üóÇÔ∏è Organisation logique

#### Backend (Python)
```
app.py
‚îú‚îÄ‚îÄ Configuration Flask
‚îú‚îÄ‚îÄ Mod√®le IA (BrainTumorCNN)
‚îú‚îÄ‚îÄ Routes publiques (/, /login, /register)
‚îú‚îÄ‚îÄ Routes prot√©g√©es (/dashboard, /patients, etc.)
‚îú‚îÄ‚îÄ API endpoints (/api/*)
‚îú‚îÄ‚îÄ Fonctions utilitaires
‚îî‚îÄ‚îÄ Initialisation DB
```

#### Frontend (HTML/CSS/JS)
```
templates/
‚îú‚îÄ‚îÄ Layouts (base_dashboard.html)
‚îú‚îÄ‚îÄ Pages publiques (index, login, register)
‚îú‚îÄ‚îÄ Pages m√©decin (dashboard, patients, etc.)
‚îî‚îÄ‚îÄ Components (modals, cards, etc.)

static/
‚îú‚îÄ‚îÄ Styles globaux (Tailwind, neuroscan-modern.css)
‚îú‚îÄ‚îÄ Styles par page (index.css, dashboard.css, etc.)
‚îú‚îÄ‚îÄ Scripts interactifs (*.js)
‚îî‚îÄ‚îÄ Assets (images, logos, ic√¥nes)
```

#### Base de donn√©es
```
neuroscan_analytics.db
‚îú‚îÄ‚îÄ doctors (comptes m√©decins)
‚îú‚îÄ‚îÄ patients (dossiers patients)
‚îú‚îÄ‚îÄ analyses (r√©sultats IRM)
‚îú‚îÄ‚îÄ medical_alerts (alertes)
‚îú‚îÄ‚îÄ daily_stats (statistiques)
‚îî‚îÄ‚îÄ sessions (sessions Flask)
```

---

### üîÑ Flux de fichiers

#### Upload et analyse
```
1. User upload ‚Üí /upload endpoint
2. Fichier sauv√© ‚Üí uploads/nom_fichier.jpg
3. Analyse PyTorch ‚Üí Pr√©diction
4. R√©sultat sauv√© ‚Üí neuroscan_analytics.db (table analyses)
5. Affichage ‚Üí templates/res_analyse.html
```

#### Gestion patient
```
1. Cr√©ation ‚Üí new_patient.html ‚Üí POST /new_patient
2. Stockage ‚Üí neuroscan_analytics.db (table patients)
3. Liste ‚Üí patients_list.html ‚Üê GET /patients
4. D√©tails ‚Üí patient_profile_pro.html ‚Üê GET /patient/<id>
```

---

### üì¶ Fichiers de configuration

#### `.env` (√† cr√©er)
```bash
SECRET_KEY=votre_cl√©_secr√®te_al√©atoire_longue
GEMINI_API_KEY=votre_cl√©_gemini_api
FLASK_ENV=development
DEBUG=True
DATABASE_URL=sqlite:///neuroscan_analytics.db
```

#### `.gitignore`
```
venv/
__pycache__/
*.pyc
*.pyo
*.db
*.log
.env
uploads/*
!uploads/.gitkeep
test_images/*
!test_images/.gitkeep
.DS_Store
.vscode/
.idea/
```

---

### üõ†Ô∏è Scripts utilitaires

#### `start_demo.sh`
```bash
#!/bin/bash
# Cr√©e venv, installe d√©pendances de base, lance app_demo.py
```

#### `install_pytorch.sh`
```bash
#!/bin/bash
# Installe PyTorch CPU dans le venv existant
```

#### `create_test_image.py`
```python
# G√©n√®re des images de test pour d√©mo
# - brain_normal.jpg
# - brain_with_tumor.jpg
```


## üß™ Test de l'application

### üñºÔ∏è Images de test

Le projet inclut un g√©n√©rateur d'images de test pour faciliter les d√©monstrations et tests.

#### G√©n√©ration d'images de test

```bash
# Activer l'environnement virtuel
source venv/bin/activate

# Ex√©cuter le g√©n√©rateur
python3 create_test_image.py
```

**Images cr√©√©es** :
```
test_images/
‚îú‚îÄ‚îÄ brain_normal.jpg          # Cerveau normal simul√© (cercle gris)
‚îî‚îÄ‚îÄ brain_with_tumor.jpg      # Cerveau avec anomalie (zone rouge)
```

Ces images synth√©tiques permettent de :
- ‚úÖ Tester l'interface d'upload
- ‚úÖ V√©rifier le pipeline de traitement
- ‚úÖ Valider l'affichage des r√©sultats
- ‚úÖ D√©mo sans images m√©dicales r√©elles

---

### üßë‚Äçüíª Tests manuels de l'interface

#### Test 1 : Inscription et connexion

```bash
# 1. D√©marrer l'application
source venv/bin/activate
python3 app.py

# 2. Ouvrir le navigateur
http://localhost:5000
```

**Actions √† tester** :
1. ‚úÖ Cliquer sur "S'inscrire"
2. ‚úÖ Remplir le formulaire avec :
   - Email : `test@neuroscan.com`
   - Mot de passe : `Test1234!`
   - Nom : `Dr. Test User`
   - Sp√©cialit√© : `Neurologie`
   - N¬∞ licence : `12345`
3. ‚úÖ Soumettre et v√©rifier la redirection vers `/dashboard`
4. ‚úÖ Se d√©connecter
5. ‚úÖ Se reconnecter avec les m√™mes identifiants

**R√©sultat attendu** : Acc√®s au dashboard sans erreur

---

#### Test 2 : Upload et analyse d'une IRM

```bash
# Pr√©requis: √ätre connect√©
```

**Actions √† tester** :
1. ‚úÖ Dashboard ‚Üí "Nouvelle analyse"
2. ‚úÖ Remplir le formulaire :
   - ID patient : `PAT001`
   - Nom : `Test Patient`
   - Date : Aujourd'hui
   - Fichier : `test_images/brain_normal.jpg`
3. ‚úÖ Cliquer sur "Analyser"
4. ‚úÖ Attendre 2-3 secondes
5. ‚úÖ V√©rifier l'affichage :
   - Image upload√©e
   - Pr√©diction (ex: "Normal")
   - Score de confiance (0-100%)
   - Probabilit√©s pour chaque classe
   - Recommandations

**R√©sultat attendu** : Analyse compl√®te avec r√©sultats coh√©rents

---

#### Test 3 : Gestion des patients

```bash
# Pr√©requis: Avoir fait au moins une analyse
```

**Actions √† tester** :
1. ‚úÖ Dashboard ‚Üí "Mes patients"
2. ‚úÖ V√©rifier la pr√©sence de `PAT001 - Test Patient`
3. ‚úÖ Cliquer sur le patient
4. ‚úÖ V√©rifier le profil PRO :
   - Carte patient avec infos
   - KPIs (analyses, confiance)
   - Onglet √âvolution (graphique)
   - Onglet Analyses (tableau)
   - Onglet Notes
5. ‚úÖ Tester l'export JSON
6. ‚úÖ Tester "Nouvelle analyse" depuis le profil

**R√©sultat attendu** : Toutes les sections chargent correctement

---

#### Test 4 : Chatbot Gemini

**Pr√©requis** : Cl√© API Gemini configur√©e

```bash
export GEMINI_API_KEY="votre_cl√©_api"
```

**Actions √† tester** :
1. ‚úÖ Page d'accueil ‚Üí Cliquer sur l'ic√¥ne chatbot (bas-droite)
2. ‚úÖ Fen√™tre s'ouvre avec animation
3. ‚úÖ Taper : "Quelles sont les fonctionnalit√©s de NeuroScan ?"
4. ‚úÖ V√©rifier la r√©ponse contextuelle
5. ‚úÖ Taper : "Quels types de tumeurs d√©tectez-vous ?"
6. ‚úÖ V√©rifier la liste des 4 types
7. ‚úÖ Taper : "J'ai mal √† la t√™te, que faire ?" (question m√©dicale)
8. ‚úÖ V√©rifier le refus de r√©pondre
9. ‚úÖ Fermer le chatbot

**R√©sultat attendu** : 
- ‚úÖ R√©ponses pertinentes sur le projet
- ‚ùå Refus des questions m√©dicales

---

#### Test 5 : Alertes m√©dicales

```bash
# Pr√©requis: Avoir analys√© une image avec tumeur
```

**Actions √† tester** :
1. ‚úÖ Uploader `test_images/brain_with_tumor.jpg` (ou une vraie IRM avec tumeur)
2. ‚úÖ Si tumeur d√©tect√©e, v√©rifier qu'une alerte est cr√©√©e
3. ‚úÖ Dashboard ‚Üí "Alertes"
4. ‚úÖ V√©rifier la pr√©sence de l'alerte
5. ‚úÖ Marquer comme lue
6. ‚úÖ Filtrer par priorit√©

**R√©sultat attendu** : Syst√®me d'alertes fonctionnel

---

### üî¨ Tests automatis√©s (√† impl√©menter)

#### Tests unitaires (pytest)

```python
# tests/test_model.py
import pytest
from app import BrainTumorCNN

def test_model_initialization():
    model = BrainTumorCNN()
    assert model is not None

def test_model_prediction_shape():
    model = BrainTumorCNN()
    # ... test shape output
```

```bash
# Installation pytest
pip install pytest pytest-cov

# Ex√©cution des tests
pytest tests/ -v

# Avec couverture de code
pytest tests/ --cov=app --cov-report=html
```

---

#### Tests d'int√©gration

```python
# tests/test_routes.py
import pytest
from app import app

@pytest.fixture
def client():
    app.config['TESTING'] = True
    with app.test_client() as client:
        yield client

def test_home_page(client):
    response = client.get('/')
    assert response.status_code == 200
    assert b'NeuroScan' in response.data

def test_login_required(client):
    response = client.get('/dashboard')
    assert response.status_code == 302  # Redirect to login

def test_upload_no_auth(client):
    response = client.post('/upload')
    assert response.status_code == 302
```

---

### üìä Tests de performance

#### Test de charge (locust)

```python
# locustfile.py
from locust import HttpUser, task, between

class NeuroScanUser(HttpUser):
    wait_time = between(1, 3)
    
    @task(1)
    def view_home(self):
        self.client.get("/")
    
    @task(2)
    def view_dashboard(self):
        # Apr√®s login
        self.client.get("/dashboard")
    
    @task(3)
    def upload_analysis(self):
        with open('test_images/brain_normal.jpg', 'rb') as f:
            self.client.post("/upload", files={'file': f})
```

```bash
# Installation
pip install locust

# Ex√©cution
locust -f locustfile.py

# Ouvrir http://localhost:8089 pour le dashboard
```

---

### üêõ Tests de d√©bogage

#### Logs d√©taill√©s

```python
# En mode debug dans app.py
import logging
logging.basicConfig(level=logging.DEBUG)

# Tester
python3 app.py
# Observer les logs dans le terminal
```

#### Profile de performance

```python
# Ajouter dans app.py
from werkzeug.middleware.profiler import ProfilerMiddleware

if app.debug:
    app.wsgi_app = ProfilerMiddleware(app.wsgi_app, 
                                      restrictions=[30])
```

---

### ‚úÖ Checklist de tests avant d√©ploiement

#### Fonctionnalit√©s
- [ ] Inscription de nouveau m√©decin
- [ ] Connexion/D√©connexion
- [ ] Upload d'image JPEG
- [ ] Upload d'image PNG
- [ ] Upload d'image DICOM (si support√©)
- [ ] Analyse avec mod√®le PyTorch
- [ ] Cr√©ation de patient
- [ ] √âdition de patient
- [ ] Profil patient PRO (toutes sections)
- [ ] Graphique d'√©volution Chart.js
- [ ] Export JSON patient
- [ ] Alertes m√©dicales
- [ ] Dashboard analytics
- [ ] Chatbot Gemini (questions accept√©es)
- [ ] Chatbot Gemini (questions refus√©es)

#### S√©curit√©
- [ ] Routes prot√©g√©es redirigent vers login
- [ ] Mots de passe hash√©s en DB
- [ ] Session expiration fonctionnelle
- [ ] Validation de taille de fichier
- [ ] Validation de format de fichier
- [ ] SQL injection protection
- [ ] XSS protection

#### Performance
- [ ] Chargement page < 2s
- [ ] Analyse IRM < 5s
- [ ] Pas de memory leaks
- [ ] DB queries optimis√©es

#### UI/UX
- [ ] Responsive sur mobile
- [ ] Responsive sur tablette
- [ ] Tous les boutons fonctionnels
- [ ] Messages d'erreur clairs
- [ ] Animations fluides
- [ ] Accessibilit√© (contraste, alt text)

---

### üì∏ Screenshots des tests

#### Upload r√©ussi
```
‚úÖ Image affich√©e
‚úÖ Pr√©diction visible (ex: "Gliome")
‚úÖ Confiance affich√©e (ex: "89.3%")
‚úÖ Graphique de probabilit√©s
‚úÖ Recommandations list√©es
```

#### Profil patient
```
‚úÖ Carte patient (avatar, infos, badge risque)
‚úÖ KPIs (3 cartes avec chiffres)
‚úÖ Graphique courbe de confiance
‚úÖ Tableau des analyses
‚úÖ Boutons "Exporter" et "Nouvelle analyse"
```

#### Chatbot
```
‚úÖ Widget flottant en bas-droite
‚úÖ Ic√¥ne cliquable
‚úÖ Fen√™tre de chat moderne
‚úÖ Messages align√©s (user √† droite, bot √† gauche)
‚úÖ Bouton fermer (X)
```


## üóÑÔ∏è Base de donn√©es

### Structure SQLite (`neuroscan_analytics.db`)

NeuroScan utilise une base de donn√©es **SQLite** l√©g√®re mais robuste, cr√©√©e automatiquement au premier d√©marrage.

#### üìä Sch√©ma complet

##### Table `doctors` - M√©decins
```sql
CREATE TABLE doctors (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    full_name TEXT NOT NULL,
    specialty TEXT,
    license_number TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
**Description** : Stocke les comptes m√©decins avec authentification s√©curis√©e.

**Index** :
```sql
CREATE INDEX idx_doctors_email ON doctors(email);
```

##### Table `patients` - Patients
```sql
CREATE TABLE patients (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT UNIQUE NOT NULL,
    name TEXT NOT NULL,
    date_of_birth DATE,
    gender TEXT,
    blood_type TEXT,
    emergency_contact TEXT,
    medical_history TEXT,
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);
```
**Description** : Dossiers patients avec informations d√©mographiques et m√©dicales.

**Index** :
```sql
CREATE INDEX idx_patients_patient_id ON patients(patient_id);
CREATE INDEX idx_patients_doctor_id ON patients(doctor_id);
```

##### Table `analyses` - Analyses IRM
```sql
CREATE TABLE analyses (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT NOT NULL,
    patient_name TEXT,
    exam_date DATE,
    image_path TEXT,
    prediction TEXT NOT NULL,
    confidence REAL NOT NULL,
    probabilities TEXT,  -- JSON: {"Normal": 0.05, "Gliome": 0.89, ...}
    is_tumor BOOLEAN,
    recommendations TEXT,  -- JSON: ["Consultation urgente", ...]
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id),
    FOREIGN KEY (patient_id) REFERENCES patients(patient_id)
);
```
**Description** : R√©sultats d'analyses IA avec pr√©dictions et recommandations.

**Index** :
```sql
CREATE INDEX idx_analyses_patient_id ON analyses(patient_id);
CREATE INDEX idx_analyses_doctor_id ON analyses(doctor_id);
CREATE INDEX idx_analyses_exam_date ON analyses(exam_date);
CREATE INDEX idx_analyses_prediction ON analyses(prediction);
```

##### Table `medical_alerts` - Alertes m√©dicales
```sql
CREATE TABLE medical_alerts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    patient_id TEXT NOT NULL,
    patient_name TEXT,
    alert_type TEXT NOT NULL,  -- 'tumor_detected', 'follow_up', etc.
    priority TEXT NOT NULL,     -- 'high', 'medium', 'low'
    message TEXT NOT NULL,
    is_read BOOLEAN DEFAULT 0,
    doctor_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);
```
**Description** : Syst√®me d'alertes pour cas critiques et suivis.

**Index** :
```sql
CREATE INDEX idx_alerts_doctor_id ON medical_alerts(doctor_id);
CREATE INDEX idx_alerts_priority ON medical_alerts(priority);
CREATE INDEX idx_alerts_is_read ON medical_alerts(is_read);
```

##### Table `daily_stats` - Statistiques quotidiennes
```sql
CREATE TABLE daily_stats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date DATE NOT NULL,
    total_analyses INTEGER DEFAULT 0,
    tumor_detected INTEGER DEFAULT 0,
    normal_scans INTEGER DEFAULT 0,
    doctor_id INTEGER,
    FOREIGN KEY (doctor_id) REFERENCES doctors(id)
);
```
**Description** : Agr√©gation quotidienne pour analytics rapides.

**Index** :
```sql
CREATE INDEX idx_daily_stats_date ON daily_stats(date);
CREATE INDEX idx_daily_stats_doctor_id ON daily_stats(doctor_id);
```

##### Table `sessions` - Sessions Flask
```sql
CREATE TABLE sessions (
    session_id TEXT PRIMARY KEY,
    data BLOB,
    expiry TIMESTAMP
);
```
**Description** : Gestion des sessions utilisateurs c√¥t√© serveur.

---

### üîó Relations entre tables

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   doctors   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<‚îÇ   patients   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ<‚îÇ   analyses   ‚îÇ
‚îÇ             ‚îÇ  1:N  ‚îÇ              ‚îÇ  1:N  ‚îÇ              ‚îÇ
‚îÇ - id        ‚îÇ       ‚îÇ - patient_id ‚îÇ       ‚îÇ - id         ‚îÇ
‚îÇ - email     ‚îÇ       ‚îÇ - name       ‚îÇ       ‚îÇ - prediction ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                      ‚îÇ
       ‚îÇ 1:N                  ‚îÇ 1:N
       ‚îÇ                      ‚îÇ
       ‚ñº                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ medical_alerts   ‚îÇ   ‚îÇ daily_stats ‚îÇ
‚îÇ - id             ‚îÇ   ‚îÇ - date      ‚îÇ
‚îÇ - priority       ‚îÇ   ‚îÇ - total     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### üîß Migrations automatiques

Au d√©marrage, `app.py` v√©rifie et cr√©e/met √† jour automatiquement la structure :

```python
def init_db():
    """Initialisation et migration automatique de la base de donn√©es"""
    conn = sqlite3.connect('neuroscan_analytics.db')
    cursor = conn.cursor()
    
    # Cr√©ation des tables si elles n'existent pas
    cursor.execute('''CREATE TABLE IF NOT EXISTS doctors ...''')
    cursor.execute('''CREATE TABLE IF NOT EXISTS patients ...''')
    # ... autres tables
    
    # V√©rification et ajout de colonnes manquantes
    try:
        cursor.execute("ALTER TABLE patients ADD COLUMN doctor_id INTEGER")
    except sqlite3.OperationalError:
        pass  # Colonne d√©j√† existante
    
    conn.commit()
    conn.close()
```

---

### üìà Requ√™tes SQL courantes

#### Obtenir les analyses d'un patient
```sql
SELECT 
    exam_date,
    prediction,
    confidence,
    probabilities
FROM analyses
WHERE patient_id = 'PAT001'
ORDER BY exam_date DESC;
```

#### Statistiques du m√©decin
```sql
SELECT 
    COUNT(*) as total_analyses,
    SUM(CASE WHEN is_tumor = 1 THEN 1 ELSE 0 END) as tumors_detected,
    AVG(confidence) as avg_confidence
FROM analyses
WHERE doctor_id = 1;
```

#### Alertes non lues
```sql
SELECT 
    patient_name,
    alert_type,
    priority,
    message,
    created_at
FROM medical_alerts
WHERE doctor_id = 1 AND is_read = 0
ORDER BY priority DESC, created_at DESC;
```

#### √âvolution d'un patient
```sql
SELECT 
    exam_date,
    prediction,
    confidence
FROM analyses
WHERE patient_id = 'PAT001'
ORDER BY exam_date ASC;
```

---

### üíæ Sauvegarde et restauration

#### Sauvegarde de la base de donn√©es
```bash
# Copie simple
cp neuroscan_analytics.db neuroscan_analytics_backup_$(date +%Y%m%d).db

# Avec SQLite3
sqlite3 neuroscan_analytics.db ".backup neuroscan_backup.db"

# Export SQL
sqlite3 neuroscan_analytics.db .dump > neuroscan_backup.sql
```

#### Restauration
```bash
# Depuis un fichier .db
cp neuroscan_analytics_backup_20251005.db neuroscan_analytics.db

# Depuis un dump SQL
sqlite3 neuroscan_analytics.db < neuroscan_backup.sql
```

---

### üîç Outils de gestion

#### SQLite Browser
```bash
# Installation
sudo apt-get install sqlitebrowser  # Linux
brew install --cask db-browser-for-sqlite  # macOS

# Ouverture
sqlitebrowser neuroscan_analytics.db
```

#### CLI SQLite
```bash
sqlite3 neuroscan_analytics.db

# Commandes utiles
.tables                    # Liste des tables
.schema analyses           # Structure d'une table
.headers on               # Afficher les en-t√™tes
.mode column              # Mode colonne
SELECT * FROM doctors;    # Requ√™te SQL
.quit                     # Quitter
```

---

### ‚ö†Ô∏è Limitations SQLite

- **Concurrent Writes** : Une seule √©criture √† la fois
- **Taille max** : 281 TB (largement suffisant pour NeuroScan)
- **Pas de gestion d'utilisateurs** : Authentification au niveau app
- **Performance** : Excellente pour < 100,000 analyses

**Pour production √† grande √©chelle**, envisager PostgreSQL ou MySQL.


## üõ†Ô∏è D√©veloppement

### üîß Configuration de l'environnement de d√©veloppement

#### Variables d'environnement

Cr√©ez un fichier `.env` √† la racine du projet :

```bash
# Flask Configuration
SECRET_KEY=dev-secret-key-change-in-production
FLASK_ENV=development
FLASK_DEBUG=1
FLASK_APP=app.py

# Database
DATABASE_URL=sqlite:///neuroscan_analytics.db

# API Keys
GEMINI_API_KEY=your_gemini_api_key_here

# Upload Settings
MAX_CONTENT_LENGTH=16777216  # 16MB in bytes
UPLOAD_FOLDER=uploads

# Session
SESSION_PERMANENT=False
SESSION_TYPE=sqlalchemy
```

#### Chargement des variables

```python
# Dans app.py
from dotenv import load_dotenv
import os

load_dotenv()

app.config['SECRET_KEY'] = os.getenv('SECRET_KEY', 'fallback-key')
GEMINI_API_KEY = os.getenv('GEMINI_API_KEY')
```

---

### üèóÔ∏è Personnalisation du mod√®le

#### Modifier l'architecture CNN

```python
# Dans app.py, classe BrainTumorCNN

class CustomCNN(nn.Module):
    def __init__(self, num_classes=4):
        super(CustomCNN, self).__init__()
        
        # Ajouter plus de couches
        self.conv6 = nn.Conv2d(512, 1024, kernel_size=3, padding=1)
        self.bn6 = nn.BatchNorm2d(1024)
        
        # Modifier le dropout
        self.dropout1 = nn.Dropout(0.6)  # Au lieu de 0.5
        
        # Ajouter une couche FC suppl√©mentaire
        self.fc4 = nn.Linear(256, 128)
        self.fc5 = nn.Linear(128, num_classes)
```

#### R√©-entra√Æner le mod√®le

```python
# train_model.py (√† cr√©er)
import torch
import torch.nn as nn
import torch.optim as optim
from torchvision import datasets, transforms
from torch.utils.data import DataLoader

# D√©finir le dataset
transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.RandomHorizontalFlip(),
    transforms.RandomRotation(10),
    transforms.ColorJitter(brightness=0.2),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406],
                         std=[0.229, 0.224, 0.225])
])

train_dataset = datasets.ImageFolder('data/train', transform=transform)
train_loader = DataLoader(train_dataset, batch_size=32, shuffle=True)

# Initialiser le mod√®le
model = BrainTumorCNN()
criterion = nn.CrossEntropyLoss()
optimizer = optim.Adam(model.parameters(), lr=0.001)

# Entra√Ænement
num_epochs = 50
for epoch in range(num_epochs):
    model.train()
    for images, labels in train_loader:
        optimizer.zero_grad()
        outputs = model(images)
        loss = criterion(outputs, labels)
        loss.backward()
        optimizer.step()
    
    print(f'Epoch [{epoch+1}/{num_epochs}], Loss: {loss.item():.4f}')

# Sauvegarder
torch.save(model.state_dict(), 'custom_model.pth')
```

---

### üé® Personnalisation de l'interface

#### Modifier le th√®me (Tailwind CSS)

```css
/* static/css/custom-theme.css */

:root {
    /* Couleurs principales */
    --primary-color: #2563eb;      /* Bleu */
    --secondary-color: #10b981;    /* Vert */
    --accent-color: #f59e0b;       /* Orange */
    --danger-color: #ef4444;       /* Rouge */
    
    /* Couleurs de fond */
    --bg-primary: #ffffff;
    --bg-secondary: #f3f4f6;
    --bg-dark: #1f2937;
    
    /* Texte */
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --text-light: #ffffff;
}

/* Boutons personnalis√©s */
.btn-custom {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: var(--text-light);
    padding: 12px 24px;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.btn-custom:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}
```

#### Ajouter une nouvelle page

```html
<!-- templates/custom_page.html -->
{% extends "base_dashboard.html" %}

{% block title %}Ma Page Personnalis√©e{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Ma Page Personnalis√©e</h1>
    
    <!-- Contenu personnalis√© -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">Section 1</h2>
            <p>Contenu...</p>
        </div>
        
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">Section 2</h2>
            <p>Contenu...</p>
        </div>
    </div>
</div>
{% endblock %}
```

```python
# Dans app.py, ajouter la route
@app.route('/custom-page')
def custom_page():
    if 'doctor_id' not in session:
        return redirect(url_for('login'))
    return render_template('custom_page.html')
```

---

### üîå Ajouter de nouveaux endpoints API

```python
# Dans app.py

@app.route('/api/custom-endpoint', methods=['GET', 'POST'])
def custom_endpoint():
    """Endpoint personnalis√©"""
    if 'doctor_id' not in session:
        return jsonify({'error': 'Unauthorized'}), 401
    
    if request.method == 'POST':
        data = request.json
        # Traitement des donn√©es
        result = process_data(data)
        return jsonify({'success': True, 'result': result})
    
    else:  # GET
        # R√©cup√©ration de donn√©es
        data = get_data()
        return jsonify(data)

def process_data(data):
    """Fonction de traitement personnalis√©e"""
    # Votre logique ici
    return processed_result

def get_data():
    """Fonction de r√©cup√©ration personnalis√©e"""
    conn = sqlite3.connect('neuroscan_analytics.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM custom_table")
    results = cursor.fetchall()
    conn.close()
    return results
```

---

### üìä Ajouter de nouvelles visualisations

#### Graphique personnalis√© avec Chart.js

```html
<!-- Dans votre template -->
<canvas id="customChart" width="400" height="200"></canvas>

<script>
const ctx = document.getElementById('customChart').getContext('2d');
const customChart = new Chart(ctx, {
    type: 'line',  // ou 'bar', 'pie', 'doughnut', etc.
    data: {
        labels: ['Jan', 'F√©v', 'Mar', 'Avr', 'Mai', 'Jun'],
        datasets: [{
            label: 'Analyses mensuelles',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: 'rgba(37, 99, 235, 0.2)',
            borderColor: 'rgba(37, 99, 235, 1)',
            borderWidth: 2,
            tension: 0.4  // Courbe lisse
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Mon Graphique Personnalis√©'
            }
        },
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
```

---

### üóÑÔ∏è Migrations de base de donn√©es

#### Ajouter une nouvelle table

```python
# Dans app.py, fonction init_db()

def init_db():
    conn = sqlite3.connect('neuroscan_analytics.db')
    cursor = conn.cursor()
    
    # ... tables existantes ...
    
    # Nouvelle table
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS custom_table (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            field1 TEXT NOT NULL,
            field2 INTEGER,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')
    
    conn.commit()
    conn.close()
```

#### Ajouter une colonne √† une table existante

```python
def migrate_add_column():
    """Ajouter une colonne √† une table existante"""
    conn = sqlite3.connect('neuroscan_analytics.db')
    cursor = conn.cursor()
    
    try:
        cursor.execute('''
            ALTER TABLE patients 
            ADD COLUMN phone_number TEXT
        ''')
        print("‚úÖ Colonne phone_number ajout√©e")
    except sqlite3.OperationalError as e:
        if "duplicate column name" in str(e):
            print("‚ö†Ô∏è Colonne phone_number d√©j√† existante")
        else:
            print(f"‚ùå Erreur: {e}")
    
    conn.commit()
    conn.close()

# Appeler au d√©marrage
migrate_add_column()
```

---

### üîí Ajouter de nouvelles fonctionnalit√©s de s√©curit√©

#### Protection CSRF avec Flask-WTF

```bash
pip install Flask-WTF
```

```python
# Dans app.py
from flask_wtf.csrf import CSRFProtect

csrf = CSRFProtect(app)

# Dans les formulaires HTML
<form method="POST">
    {{ csrf_token() }}
    <!-- autres champs -->
</form>
```

#### Rate Limiting avec Flask-Limiter

```bash
pip install Flask-Limiter
```

```python
# Dans app.py
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address

limiter = Limiter(
    app=app,
    key_func=get_remote_address,
    default_limits=["200 per day", "50 per hour"]
)

@app.route('/api/chatbot', methods=['POST'])
@limiter.limit("10 per minute")  # Limite sp√©cifique
def chatbot_api():
    # ...
```

---

### üß™ Configuration de tests

#### pytest configuration

```python
# tests/conftest.py
import pytest
from app import app, init_db

@pytest.fixture
def client():
    app.config['TESTING'] = True
    app.config['DATABASE'] = 'test_neuroscan.db'
    
    with app.test_client() as client:
        with app.app_context():
            init_db()
        yield client
    
    # Cleanup
    import os
    if os.path.exists('test_neuroscan.db'):
        os.remove('test_neuroscan.db')

@pytest.fixture
def logged_in_client(client):
    """Client avec session m√©decin"""
    with client.session_transaction() as sess:
        sess['doctor_id'] = 1
        sess['doctor_name'] = 'Dr. Test'
    return client
```

---

### üìù Guide de contribution

#### Workflow Git

```bash
# 1. Cr√©er une branche pour votre feature
git checkout -b feature/nouvelle-fonctionnalite

# 2. Faire vos modifications
# ... √©diter les fichiers ...

# 3. Commiter avec un message clair
git add .
git commit -m "feat: Ajout de la fonctionnalit√© X"

# 4. Pousser vers GitHub
git push origin feature/nouvelle-fonctionnalite

# 5. Cr√©er une Pull Request sur GitHub
```

#### Convention de commits

```
feat: Nouvelle fonctionnalit√©
fix: Correction de bug
docs: Documentation
style: Formatage (pas de changement de code)
refactor: Refactorisation
test: Ajout de tests
chore: T√¢ches de maintenance
```

---

### üê≥ Docker (optionnel)

#### Dockerfile

```dockerfile
FROM python:3.10-slim

WORKDIR /app

# D√©pendances syst√®me
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# D√©pendances Python
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Code de l'application
COPY . .

# Port Flask
EXPOSE 5000

# Variables d'environnement
ENV FLASK_APP=app.py
ENV FLASK_ENV=production

# Commande de d√©marrage
CMD ["gunicorn", "--bind", "0.0.0.0:5000", "app:app"]
```

#### docker-compose.yml

```yaml
version: '3.8'

services:
  neuroscan:
    build: .
    ports:
      - "5000:5000"
    volumes:
      - ./neuroscan_analytics.db:/app/neuroscan_analytics.db
      - ./uploads:/app/uploads
    environment:
      - SECRET_KEY=${SECRET_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - FLASK_ENV=production
    restart: unless-stopped
```

```bash
# Lancer avec Docker
docker-compose up -d

# Voir les logs
docker-compose logs -f

# Arr√™ter
docker-compose down
```

---

### üìö Ressources pour d√©veloppeurs

#### Documentation
- [Flask Documentation](https://flask.palletsprojects.com/)
- [PyTorch Tutorials](https://pytorch.org/tutorials/)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [Chart.js Guide](https://www.chartjs.org/docs/)
- [SQLite Documentation](https://www.sqlite.org/docs.html)

#### Communaut√©s
- [Stack Overflow - Flask](https://stackoverflow.com/questions/tagged/flask)
- [PyTorch Forums](https://discuss.pytorch.org/)
- [Reddit r/Flask](https://www.reddit.com/r/flask/)
- [Reddit r/MachineLearning](https://www.reddit.com/r/MachineLearning/)

#### Outils recommand√©s
- **IDE** : VS Code, PyCharm
- **Extensions VS Code** : Python, Pylance, Tailwind CSS IntelliSense
- **Debugging** : Flask-DebugToolbar, pdb
- **API Testing** : Postman, Insomnia, httpie
- **Database** : DB Browser for SQLite, DBeaver


## üìû Support

### üÜò Probl√®mes courants et solutions

#### Probl√®me 1 : ModuleNotFoundError

**Erreur** :
```
ModuleNotFoundError: No module named 'torch'
```

**Solution** :
```bash
# V√©rifier que l'environnement virtuel est activ√©
which python3  # Doit pointer vers venv/bin/python3

# Si non activ√©, activer
source venv/bin/activate

# Installer PyTorch
pip install torch torchvision --index-url https://download.pytorch.org/whl/cpu
```

---

#### Probl√®me 2 : Port 5000 d√©j√† utilis√©

**Erreur** :
```
OSError: [Errno 48] Address already in use
```

**Solution** :
```bash
# M√©thode 1: Trouver et tuer le processus
lsof -ti:5000 | xargs kill -9

# M√©thode 2: Changer le port dans app.py
# Modifier la derni√®re ligne:
app.run(debug=True, host='0.0.0.0', port=5001)
```

---

#### Probl√®me 3 : Erreur de base de donn√©es

**Erreur** :
```
sqlite3.OperationalError: no such table: doctors
```

**Solution** :
```bash
# Supprimer l'ancienne DB et laisser recr√©er
rm neuroscan_analytics.db

# Relancer l'application (recr√©era automatiquement)
python3 app.py
```

---

#### Probl√®me 4 : Fichier trop volumineux

**Erreur** :
```
413 Request Entity Too Large
```

**Solution** :
```python
# Dans app.py, augmenter la limite
app.config['MAX_CONTENT_LENGTH'] = 32 * 1024 * 1024  # 32MB au lieu de 16MB
```

---

#### Probl√®me 5 : Erreur Gemini API

**Erreur** :
```
API Gemini indisponible
```

**Solution** :
```bash
# V√©rifier que la cl√© API est d√©finie
echo $GEMINI_API_KEY

# Si vide, d√©finir
export GEMINI_API_KEY="votre_cl√©_api"

# Ou cr√©er un fichier .env
echo "GEMINI_API_KEY=votre_cl√©_api" > .env

# Installer python-dotenv
pip install python-dotenv
```

---

#### Probl√®me 6 : Images ne s'affichent pas

**Erreur** : Images upload√©es non visibles dans le profil patient

**Solution** :
```bash
# V√©rifier que le dossier uploads existe
ls -la uploads/

# Si absent, cr√©er
mkdir uploads

# V√©rifier les permissions
chmod 755 uploads/
```

---

#### Probl√®me 7 : Session expir√©e imm√©diatement

**Erreur** : D√©connexion automatique apr√®s quelques secondes

**Solution** :
```python
# Dans app.py, v√©rifier la configuration des sessions
app.config['SESSION_PERMANENT'] = True
app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(hours=24)
```

---

### üîç Diagnostic des probl√®mes

#### Activer les logs d√©taill√©s

```python
# Dans app.py, ajouter en d√©but de fichier
import logging
logging.basicConfig(level=logging.DEBUG)

# Ou plus sp√©cifique
app.logger.setLevel(logging.DEBUG)
```

#### V√©rifier l'installation des d√©pendances

```bash
# Liste des paquets install√©s
pip list

# V√©rifier une d√©pendance sp√©cifique
pip show torch
pip show flask

# R√©installer toutes les d√©pendances
pip install -r requirements.txt --force-reinstall
```

#### Tester l'import du mod√®le

```bash
python3 -c "import torch; print(f'PyTorch: {torch.__version__}')"
python3 -c "from app import BrainTumorCNN; print('Model OK')"
```

---

### üìß Obtenir de l'aide

#### Documentation et tutoriels

1. **README.md** : Ce fichier (documentation compl√®te)
2. **Notebooks Jupyter** :
   - `brain-tumor-classification-pytorch-99-7-test.ipynb`
   - `step-wise-approach-cnn-model-77-0344-accuracy.ipynb`

#### Communaut√© et forums

- **GitHub Issues** : [https://github.com/MohammedBetkaoui/NeuroScan/issues](https://github.com/MohammedBetkaoui/NeuroScan/issues)
- **Stack Overflow** : Tag `flask`, `pytorch`, `neuroscan`
- **Discord/Slack** : (√Ä cr√©er si communaut√© grandit)

#### Contact direct

Pour toute question ou probl√®me technique :

- **Email** : support@neuroscan.example.com
- **GitHub** : [@MohammedBetkaoui](https://github.com/MohammedBetkaoui)
- **Issues GitHub** : Cr√©er une issue d√©taill√©e avec :
  1. Description du probl√®me
  2. √âtapes pour reproduire
  3. Messages d'erreur complets
  4. Environnement (OS, Python version, etc.)
  5. Logs si disponibles

---

### üêõ Rapporter un bug

#### Template de rapport de bug

```markdown
### Description du bug
[Description claire et concise du bug]

### √âtapes pour reproduire
1. Aller sur '...'
2. Cliquer sur '...'
3. Voir l'erreur

### Comportement attendu
[Ce qui devrait se passer]

### Comportement actuel
[Ce qui se passe r√©ellement]

### Screenshots
[Si applicable]

### Environnement
- OS: [ex: Ubuntu 22.04]
- Python: [ex: 3.10.5]
- Flask: [ex: 2.3.0]
- PyTorch: [ex: 2.0.1]
- Navigateur: [ex: Chrome 118]

### Logs
```
[Coller les logs d'erreur ici]
```

### Informations suppl√©mentaires
[Tout autre contexte utile]
```

---

### üí° Demander une fonctionnalit√©

#### Template de feature request

```markdown
### Fonctionnalit√© souhait√©e
[Description claire de la fonctionnalit√©]

### Motivation
[Pourquoi cette fonctionnalit√© serait utile]

### Solution propos√©e
[Comment vous imaginez l'impl√©mentation]

### Alternatives consid√©r√©es
[Autres solutions envisag√©es]

### Contexte additionnel
[Toute autre information pertinente]
```

---

### üìö FAQ (Foire Aux Questions)

#### Q1 : Puis-je utiliser NeuroScan pour de vrais diagnostics ?
**R** : Non. NeuroScan est un outil √©ducatif et de recherche uniquement. Il ne doit pas √™tre utilis√© pour des diagnostics m√©dicaux r√©els sans validation par des professionnels qualifi√©s et certification r√©glementaire (FDA, CE, etc.).

#### Q2 : Quelle est la pr√©cision du mod√®le ?
**R** : Le mod√®le atteint 99.7% de pr√©cision sur le dataset de test sp√©cifique. Cependant, cette performance peut varier avec des images d'autres sources ou de qualit√© diff√©rente.

#### Q3 : Puis-je utiliser mes propres images IRM ?
**R** : Oui, tant qu'elles sont dans un format support√© (DICOM, NIfTI, JPEG, PNG) et de bonne qualit√©. Notez que le mod√®le a √©t√© entra√Æn√© sur un dataset sp√©cifique et pourrait ne pas √™tre aussi pr√©cis sur des images tr√®s diff√©rentes.

#### Q4 : Comment obtenir une cl√© API Gemini ?
**R** : Allez sur [https://makersuite.google.com/app/apikey](https://makersuite.google.com/app/apikey), connectez-vous avec votre compte Google, et g√©n√©rez une cl√© API gratuite.

#### Q5 : Puis-je d√©ployer NeuroScan sur un serveur ?
**R** : Oui, mais assurez-vous de suivre les recommandations de s√©curit√© (HTTPS, secrets s√©curis√©s, etc.). Voir la section "S√©curit√©" pour plus de d√©tails.

#### Q6 : Le mod√®le fonctionne-t-il sur GPU ?
**R** : Par d√©faut, NeuroScan utilise la version CPU de PyTorch. Pour utiliser un GPU, installez la version GPU de PyTorch et le mod√®le d√©tectera automatiquement le GPU disponible.

#### Q7 : Puis-je ajouter d'autres types de tumeurs ?
**R** : Oui, mais vous devrez r√©-entra√Æner le mod√®le avec un dataset incluant les nouveaux types. Consultez les notebooks Jupyter fournis pour comprendre le processus d'entra√Ænement.

#### Q8 : Les donn√©es des patients sont-elles s√©curis√©es ?
**R** : Les donn√©es sont stock√©es localement dans une base SQLite. Pour une s√©curit√© maximale en production, utilisez HTTPS, chiffrement de la base, sauvegardes r√©guli√®res, et suivez les normes RGPD/HIPAA.

#### Q9 : Puis-je contribuer au projet ?
**R** : Absolument ! Les contributions sont les bienvenues. Forkez le d√©p√¥t, cr√©ez une branche, faites vos modifications, et soumettez une Pull Request.

#### Q10 : Quelle est la licence du projet ?
**R** : [√Ä d√©finir - MIT, Apache 2.0, GPL, ou autre selon votre choix]

---

### üîß Outils de diagnostic

#### Script de v√©rification syst√®me

```bash
#!/bin/bash
# check_system.sh

echo "=== NeuroScan System Check ==="
echo ""

echo "1. Python version:"
python3 --version
echo ""

echo "2. Virtual environment:"
if [ -d "venv" ]; then
    echo "‚úÖ venv exists"
else
    echo "‚ùå venv not found"
fi
echo ""

echo "3. Dependencies:"
source venv/bin/activate 2>/dev/null
pip list | grep -E "Flask|torch|Pillow|numpy"
echo ""

echo "4. Database:"
if [ -f "neuroscan_analytics.db" ]; then
    echo "‚úÖ Database exists"
    sqlite3 neuroscan_analytics.db "SELECT name FROM sqlite_master WHERE type='table';" | head -5
else
    echo "‚ùå Database not found"
fi
echo ""

echo "5. Model file:"
if [ -f "best_brain_tumor_model.pth" ]; then
    echo "‚úÖ Model file exists ($(ls -lh best_brain_tumor_model.pth | awk '{print $5}'))"
else
    echo "‚ùå Model file not found"
fi
echo ""

echo "6. Uploads directory:"
if [ -d "uploads" ]; then
    echo "‚úÖ Uploads directory exists ($(ls uploads | wc -l) files)"
else
    echo "‚ùå Uploads directory not found"
fi
echo ""

echo "7. Port 5000 availability:"
if lsof -Pi :5000 -sTCP:LISTEN -t >/dev/null 2>&1; then
    echo "‚ùå Port 5000 is in use"
else
    echo "‚úÖ Port 5000 is available"
fi
echo ""

echo "=== End of System Check ==="
```

```bash
# Utilisation
chmod +x check_system.sh
./check_system.sh
```

---

### üìä Monitoring et performance

#### Activer le monitoring

```python
# Dans app.py
from flask import g
import time

@app.before_request
def before_request():
    g.start_time = time.time()

@app.after_request
def after_request(response):
    if hasattr(g, 'start_time'):
        elapsed = time.time() - g.start_time
        app.logger.info(f"{request.method} {request.path} - {response.status_code} - {elapsed:.3f}s")
    return response
```

#### Surveiller les ressources

```bash
# CPU et m√©moire
ps aux | grep python

# Espace disque
df -h

# Taille de la base de donn√©es
du -h neuroscan_analytics.db

# Nombre de fichiers upload√©s
ls -1 uploads/ | wc -l
```

---

### üéì Formation et tutoriels

#### Vid√©os tutoriels (√† cr√©er)
1. Installation et configuration
2. Premi√®re analyse d'IRM
3. Gestion des patients
4. Personnalisation de l'interface
5. D√©ploiement en production

#### Workshops et formations
- Workshop d√©butants : "Premiers pas avec NeuroScan"
- Workshop avanc√© : "Personnaliser et √©tendre NeuroScan"
- Formation : "Deep Learning pour l'imagerie m√©dicale"

---

### ü§ù Contribuer √† la documentation

Si vous trouvez des erreurs ou souhaitez am√©liorer cette documentation :

1. Forkez le d√©p√¥t
2. √âditez `README.md`
3. Soumettez une Pull Request avec vos modifications
4. D√©crivez les changements apport√©s

**Merci de contribuer √† am√©liorer NeuroScan ! üöÄ**


## üìÑ Licence

### üìú Licence du projet

Ce projet **NeuroScan** est fourni √† des fins **√©ducatives et de recherche uniquement**.

#### Conditions d'utilisation

```
Copyright (c) 2025 Mohammed Betkaoui

Permission est accord√©e, gratuitement, √† toute personne obtenant une copie
de ce logiciel et de la documentation associ√©e (le "Logiciel"), de traiter
le Logiciel sans restriction, y compris, sans limitation, les droits d'utiliser,
de copier, de modifier, de fusionner, de publier, de distribuer, de sous-licencier
et/ou de vendre des copies du Logiciel, sous r√©serve des conditions suivantes :

1. AVERTISSEMENT M√âDICAL :
   Ce logiciel est destin√© √† des fins √©ducatives et de recherche uniquement.
   Il NE DOIT PAS √™tre utilis√© pour des diagnostics m√©dicaux r√©els sans :
   - Validation par des professionnels de sant√© qualifi√©s
   - Certification r√©glementaire appropri√©e (FDA, CE, etc.)
   - Conformit√© aux normes m√©dicales locales

2. LIMITATION DE RESPONSABILIT√â :
   LE LOGICIEL EST FOURNI "TEL QUEL", SANS GARANTIE D'AUCUNE SORTE, EXPLICITE
   OU IMPLICITE, Y COMPRIS, MAIS SANS S'Y LIMITER, LES GARANTIES DE
   COMMERCIALISATION, D'AD√âQUATION √Ä UN USAGE PARTICULIER ET D'ABSENCE DE
   CONTREFA√áON. EN AUCUN CAS LES AUTEURS OU LES D√âTENTEURS DU COPYRIGHT NE
   POURRONT √äTRE TENUS RESPONSABLES DE TOUTE R√âCLAMATION, DOMMAGE OU AUTRE
   RESPONSABILIT√â, QUE CE SOIT DANS UNE ACTION CONTRACTUELLE, D√âLICTUELLE
   OU AUTRE, D√âCOULANT DE, OU EN RELATION AVEC LE LOGICIEL OU L'UTILISATION
   OU D'AUTRES TRANSACTIONS DANS LE LOGICIEL.

3. ATTRIBUTION :
   L'avis de copyright ci-dessus et cet avis de permission doivent √™tre inclus
   dans toutes les copies ou parties substantielles du Logiciel.

4. DONN√âES M√âDICALES :
   Les utilisateurs sont responsables de la conformit√© avec les r√©glementations
   sur la protection des donn√©es m√©dicales (RGPD, HIPAA, etc.) dans leur
   juridiction.
```

---

### üîì Composants open-source utilis√©s

Ce projet utilise les biblioth√®ques et frameworks open-source suivants :

#### Backend
- **Flask** - BSD-3-Clause License
- **PyTorch** - BSD-style License
- **Pillow (PIL)** - HPND License
- **NumPy** - BSD License
- **OpenCV** - Apache 2.0 License
- **SQLite** - Public Domain

#### Frontend
- **Tailwind CSS** - MIT License
- **Chart.js** - MIT License
- **Font Awesome** - Font Awesome Free License

#### APIs
- **Google Gemini API** - Soumis aux conditions de Google

Merci √† tous les mainteneurs et contributeurs de ces projets ! üôè

---

### ‚öñÔ∏è Consid√©rations l√©gales

#### Utilisation commerciale

Si vous souhaitez utiliser NeuroScan √† des fins commerciales :

1. **Obtenir les certifications requises** :
   - FDA (√âtats-Unis) pour dispositifs m√©dicaux
   - Marquage CE (Europe) pour dispositifs m√©dicaux
   - Autres certifications selon votre juridiction

2. **Conformit√© r√©glementaire** :
   - RGPD (Europe) pour la protection des donn√©es
   - HIPAA (√âtats-Unis) pour les donn√©es de sant√©
   - Lois locales sur la protection des donn√©es m√©dicales

3. **Validation clinique** :
   - √âtudes cliniques avec protocoles approuv√©s
   - Validation par des radiologues certifi√©s
   - Documentation des performances dans des conditions r√©elles

4. **Assurance responsabilit√©** :
   - Assurance responsabilit√© professionnelle
   - Couverture des risques li√©s aux dispositifs m√©dicaux

#### Avertissement de non-responsabilit√©

```
EN UTILISANT CE LOGICIEL, VOUS RECONNAISSEZ ET ACCEPTEZ QUE :

1. Les r√©sultats fournis par NeuroScan sont g√©n√©r√©s par un mod√®le d'IA
   et ne constituent PAS un diagnostic m√©dical officiel.

2. Toute d√©cision m√©dicale doit √™tre prise par des professionnels de
   sant√© qualifi√©s sur la base d'examens complets.

3. Les auteurs et contributeurs de NeuroScan ne peuvent √™tre tenus
   responsables de tout dommage, blessure ou perte r√©sultant de
   l'utilisation de ce logiciel.

4. L'utilisation de NeuroScan dans un contexte clinique r√©el sans
   les autorisations r√©glementaires appropri√©es peut violer les lois
   locales et internationales.

5. Vous √™tes seul responsable de la conformit√© aux lois et r√©glementations
   applicables dans votre juridiction.
```

---

### üìö Cr√©dits et attributions

#### Auteur principal
- **Mohammed Betkaoui** - D√©veloppement initial et maintenance
  - GitHub: [@MohammedBetkaoui](https://github.com/MohammedBetkaoui)
  - Email: mohammed.betkaoui@example.com

#### Contributeurs
- [Liste des contributeurs](https://github.com/MohammedBetkaoui/NeuroScan/graphs/contributors)

#### Dataset
- Le mod√®le a √©t√© entra√Æn√© sur un dataset public d'images IRM de tumeurs c√©r√©brales
- Source : [√Ä sp√©cifier - ex: Kaggle, institutions m√©dicales, etc.]
- Les utilisateurs du dataset doivent respecter les conditions d'utilisation originales

#### Inspiration et r√©f√©rences
- Architecture CNN inspir√©e de ResNet et VGGNet
- Interface utilisateur inspir√©e par les meilleures pratiques en UX m√©dicale
- M√©thodologie bas√©e sur les publications scientifiques en imagerie m√©dicale par IA

---

### üéì Citations acad√©miques

Si vous utilisez NeuroScan dans un contexte acad√©mique ou de recherche, veuillez citer :

```bibtex
@software{neuroscan2025,
  author = {Betkaoui, Mohammed},
  title = {NeuroScan: Plateforme d'Analyse IA de Tumeurs C√©r√©brales},
  year = {2025},
  publisher = {GitHub},
  url = {https://github.com/MohammedBetkaoui/NeuroScan},
  version = {2.0.0}
}
```

**Format texte** :
```
Betkaoui, M. (2025). NeuroScan: Plateforme d'Analyse IA de Tumeurs C√©r√©brales
(Version 2.0.0) [Computer software]. GitHub.
https://github.com/MohammedBetkaoui/NeuroScan
```

---

### ü§ù Politique de contribution

#### Licence des contributions

En contribuant √† NeuroScan, vous acceptez que :

1. Vos contributions soient sous la m√™me licence que le projet
2. Vous avez le droit l√©gal de contribuer le code soumis
3. Vous comprenez que vos contributions seront publiques et accessibles √† tous

#### Code of Conduct

Nous nous engageons √† fournir un environnement accueillant et inclusif. Nous attendons de tous les contributeurs :

- ü§ù Respect mutuel et courtoisie
- üí¨ Communication constructive
- üéØ Focus sur le projet et son am√©lioration
- üö´ Tol√©rance z√©ro pour le harc√®lement

---

### üìû Contact pour questions l√©gales

Pour toute question concernant la licence ou l'utilisation commerciale :

- **Email l√©gal** : legal@neuroscan.example.com
- **R√©ponse sous** : 5-7 jours ouvr√©s

---

### üîÑ Mises √† jour de la licence

Cette licence peut √™tre mise √† jour. Les modifications seront :
- Document√©es dans le changelog
- Annonc√©es via GitHub Releases
- Applicables aux nouvelles versions uniquement

**Derni√®re mise √† jour** : Octobre 2025

---

### ‚úÖ R√©sum√© des permissions

| Permission | Autoris√© | Conditions |
|------------|----------|------------|
| ‚úÖ Utilisation personnelle | Oui | √âducation/Recherche uniquement |
| ‚úÖ Modification du code | Oui | Respecter la licence |
| ‚úÖ Distribution | Oui | Inclure l'avis de licence |
| ‚úÖ Utilisation commerciale | Avec restrictions | Certifications requises |
| ‚úÖ Brevet | Non | Aucune garantie de brevet |
| ‚ùå Garantie | Non | Logiciel fourni "tel quel" |
| ‚ùå Responsabilit√© | Non | Aucune responsabilit√© des auteurs |

---

## üôè Remerciements

Un grand merci √† :

- üß† **La communaut√© PyTorch** pour l'excellent framework de Deep Learning
- üåê **La communaut√© Flask** pour le framework web simple et puissant
- üé® **Les cr√©ateurs de Tailwind CSS** pour le framework CSS moderne
- üìä **Les d√©veloppeurs de Chart.js** pour les visualisations interactives
- ü§ñ **Google** pour l'API Gemini permettant le chatbot intelligent
- üë• **Tous les contributeurs** qui am√©liorent NeuroScan chaque jour
- üè• **Les professionnels de sant√©** qui inspirent ce projet
- üìö **La communaut√© open-source** pour le partage de connaissances

---

## üåü Star History

Si vous trouvez NeuroScan utile, n'h√©sitez pas √† donner une ‚≠ê sur GitHub !

[![Star History Chart](https://api.star-history.com/svg?repos=MohammedBetkaoui/NeuroScan&type=Date)](https://star-history.com/#MohammedBetkaoui/NeuroScan&Date)

---

## üì¨ Suivez le projet

- üêô **GitHub** : [NeuroScan Repository](https://github.com/MohammedBetkaoui/NeuroScan)
- üìß **Email** : neuroscan@example.com
- üê¶ **Twitter** : [@NeuroScanAI](https://twitter.com/NeuroScanAI)
- üíº **LinkedIn** : [NeuroScan Project](https://linkedin.com/company/neuroscan)

---

## üöÄ Roadmap future

Fonctionnalit√©s pr√©vues pour les prochaines versions :

### Version 2.1
- [ ] Support de l'authentification 2FA
- [ ] Export PDF des rapports d'analyse
- [ ] API REST compl√®te document√©e avec Swagger
- [ ] Mode multi-langues (FR, EN, AR)

### Version 2.2
- [ ] Analyse de s√©quences IRM compl√®tes (3D)
- [ ] Comparaison automatique d'analyses temporelles
- [ ] Int√©gration PACS (Picture Archiving and Communication System)
- [ ] Module de t√©l√©consultation

### Version 3.0
- [ ] Migration vers PostgreSQL pour production
- [ ] Support de multiples mod√®les IA au choix
- [ ] Dashboard d'administration pour superviser tous les m√©decins
- [ ] Module de formation continue pour les m√©decins
- [ ] Application mobile iOS/Android

**Suggestions bienvenues !** Ouvrez une issue GitHub avec le tag `enhancement`.

---

<div align="center">

### üíô Fait avec passion pour am√©liorer le diagnostic m√©dical par IA

**NeuroScan** - Transforming Medical Imaging with AI

‚≠ê **N'oubliez pas de mettre une √©toile si ce projet vous est utile !** ‚≠ê

---

**[‚¨Ü Retour en haut](#-neuroscan---plateforme-danalyse-ia-de-tumeurs-c√©r√©brales)**

</div>
