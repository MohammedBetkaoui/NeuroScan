<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - NeuroScan Pro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.build.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-gray: #6b7280;
            --border-color: #e2e8f0;
            --shadow-light: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-medium: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--primary-bg);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            color: var(--text-primary);
        }

        /* Arrière-plan simple et clair */
        .simple-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
        }

        /* Carte principale améliorée */
        .login-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 1.5rem;
            box-shadow:
                0 1px 3px 0 rgba(0, 0, 0, 0.1),
                0 1px 2px 0 rgba(0, 0, 0, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            position: relative;
            z-index: 10;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            overflow: hidden;
            width: 100%;
            max-width: 32rem;
            padding: 2rem;
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                rgba(59, 130, 246, 0.02) 0%,
                rgba(59, 130, 246, 0.01) 25%,
                transparent 50%,
                rgba(59, 130, 246, 0.01) 75%,
                rgba(59, 130, 246, 0.02) 100%);
            border-radius: 1.5rem;
            pointer-events: none;
            z-index: -1;
        }

        .login-card::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg,
                rgba(59, 130, 246, 0.1) 0%,
                rgba(16, 185, 129, 0.1) 50%,
                rgba(139, 92, 246, 0.1) 100%);
            border-radius: 1.5rem;
            z-index: -2;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .login-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow:
                0 20px 25px -5px rgba(0, 0, 0, 0.1),
                0 10px 10px -5px rgba(0, 0, 0, 0.04),
                0 0 0 1px rgba(255, 255, 255, 0.9) inset;
        }

        .login-card:hover::after {
            opacity: 1;
        }

        /* Ligne décorative supérieure */
        .login-card .card-header {
            position: relative;
            padding-bottom: 2rem;
            margin-bottom: 2rem;
        }

        .login-card .card-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            border-radius: 2px;
            opacity: 0.6;
        }

        /* Logo amélioré */
        .logo-container {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%);
            position: relative;
            box-shadow:
                0 4px 6px -1px rgba(59, 130, 246, 0.1),
                0 2px 4px -1px rgba(59, 130, 246, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .logo-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
        }

        .logo-container:hover::before {
            left: 100%;
        }

        .logo-container:hover {
            transform: scale(1.05);
            box-shadow:
                0 10px 15px -3px rgba(59, 130, 246, 0.1),
                0 4px 6px -2px rgba(59, 130, 246, 0.05),
                0 0 0 1px rgba(255, 255, 255, 0.3) inset;
        }

        .logo-container i {
            color: white;
            transition: all 0.3s ease;
        }

        .logo-container:hover i {
            transform: scale(1.1);
        }

        /* Titre avec effet subtil */
        .title-simple {
            color: var(--text-primary);
            font-weight: 800;
            position: relative;
            display: inline-block;
        }

        .title-simple::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            transition: width 0.4s ease;
            border-radius: 1px;
        }

        .login-card:hover .title-simple::after {
            width: 100%;
        }

        /* Indicateurs de statut améliorés */
        .status-indicators {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .status-dot {
            width: 2.5rem;
            height: 0.375rem;
            border-radius: 0.1875rem;
            background: var(--accent-blue);
            opacity: 0.7;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .status-dot::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }

        .status-dot:nth-child(2) {
            background: var(--accent-green);
        }

        .status-dot:nth-child(3) {
            background: var(--accent-gray);
        }

        .login-card:hover .status-dot::before {
            left: 100%;
        }

        /* Champs de formulaire améliorés */
        .form-field {
            position: relative;
            margin-bottom: 1.75rem;
        }

        .input-wrapper {
            position: relative;
            border-radius: 1rem;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                0 1px 3px 0 rgba(0, 0, 0, 0.1),
                0 1px 2px 0 rgba(0, 0, 0, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            overflow: hidden;
        }

        .input-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.05), transparent);
            transition: left 0.5s ease;
        }

        .input-wrapper:hover::before {
            left: 100%;
        }

        .input-wrapper:hover {
            border-color: var(--accent-blue);
            box-shadow:
                0 4px 6px -1px rgba(59, 130, 246, 0.1),
                0 2px 4px -1px rgba(59, 130, 246, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.9) inset;
            transform: translateY(-1px);
        }

        .input-wrapper:focus-within {
            border-color: var(--accent-blue);
            box-shadow:
                0 0 0 3px rgba(59, 130, 246, 0.1),
                0 4px 6px -1px rgba(59, 130, 246, 0.1),
                0 2px 4px -1px rgba(59, 130, 246, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.9) inset;
            transform: translateY(-1px);
        }

        .input-field {
            width: 100%;
            padding: 1.125rem 1.125rem 1.125rem 3.5rem;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .input-field::placeholder {
            color: var(--text-secondary);
            font-weight: 400;
            transition: all 0.3s ease;
        }

        .input-field:focus::placeholder {
            color: var(--text-secondary);
            opacity: 0.7;
        }

        .field-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.125rem;
            transition: all 0.3s ease;
            z-index: 3;
        }

        .input-wrapper:focus-within .field-icon,
        .input-wrapper:hover .field-icon {
            color: var(--accent-blue);
            transform: translateY(-50%) scale(1.1);
        }

        /* Bouton de bascule mot de passe amélioré */
        .password-toggle {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.875rem;
            padding: 0.625rem;
            border-radius: 0.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 3;
        }

        .password-toggle:hover {
            color: white;
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2);
        }

        .password-toggle:active {
            transform: translateY(-50%) scale(0.95);
        }

        /* Bouton principal amélioré */
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue) 0%, #2563eb 100%);
            border: none;
            color: white;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                0 4px 6px -1px rgba(59, 130, 246, 0.1),
                0 2px 4px -1px rgba(59, 130, 246, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            box-shadow:
                0 10px 15px -3px rgba(59, 130, 246, 0.1),
                0 4px 6px -2px rgba(59, 130, 246, 0.05);
            transform: translateY(-2px);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow:
                0 4px 6px -1px rgba(59, 130, 246, 0.1),
                0 2px 4px -1px rgba(59, 130, 246, 0.06);
        }

        .btn-primary.loading {
            pointer-events: none;
            opacity: 0.9;
        }

        .btn-primary.loading::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            right: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Liens améliorés */
        .link-primary {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            padding: 0.75rem 1.25rem;
            border-radius: 0.75rem;
            border: 1px solid rgba(59, 130, 246, 0.2);
            background: rgba(59, 130, 246, 0.02);
            position: relative;
            overflow: hidden;
        }

        .link-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .link-primary:hover::before {
            left: 100%;
        }

        .link-primary:hover {
            color: #2563eb;
            background: rgba(59, 130, 246, 0.05);
            border-color: rgba(59, 130, 246, 0.4);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
        }

        /* Animations d'entrée améliorées */
        @keyframes cardEntrance {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
                filter: blur(5px);
            }
            50% {
                opacity: 0.8;
                transform: translateY(-5px) scale(1.02);
                filter: blur(2px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        @keyframes staggerEntrance {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* États de validation améliorés */
        .field-error .input-wrapper {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .field-valid .input-wrapper {
            border-color: var(--accent-green);
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Section sécurité améliorée */
        .security-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 1.25rem;
            box-shadow:
                0 1px 3px 0 rgba(0, 0, 0, 0.1),
                0 1px 2px 0 rgba(0, 0, 0, 0.06),
                0 0 0 1px rgba(255, 255, 255, 0.8) inset;
            position: relative;
            overflow: hidden;
        }

        .security-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green), var(--accent-gray));
            border-radius: 1.25rem 1.25rem 0 0;
        }

        .security-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                rgba(59, 130, 246, 0.01) 0%,
                transparent 50%,
                rgba(16, 185, 129, 0.01) 100%);
            pointer-events: none;
            border-radius: 1.25rem;
        }

        /* Indicateurs de sécurité améliorés */
        .security-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 1rem;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 1.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .security-indicator:hover {
            background: var(--card-bg);
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.1),
                0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transform: translateY(-1px);
        }

        .security-indicator i {
            color: var(--accent-green);
            transition: all 0.3s ease;
        }

        .security-indicator:nth-child(2) i {
            color: var(--accent-blue);
        }

        .security-indicator:nth-child(3) i {
            color: var(--accent-gray);
        }

        .security-indicator:hover i {
            transform: scale(1.1);
        }

        /* Responsive design */
        @media (max-width: 640px) {
            .login-card {
                margin: 1rem;
                padding: 2rem 1.5rem;
            }

            .status-indicators {
                gap: 0.25rem;
            }

            .status-dot {
                width: 1.5rem;
            }
        }

        /* Accessibilité */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Arrière-plan simple -->
    <div class="simple-bg"></div>

    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="login-card rounded-2xl">
            <!-- Logo et titre -->
            <div class="text-center mb-8">
                <div class="logo-container inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-6 mx-auto">
                    <i class="fas fa-brain text-3xl"></i>
                </div>
                <h1 class="text-4xl font-black title-simple mb-3">
                    NeuroScan Pro
                </h1>
                <p class="text-secondary text-lg font-medium">Connexion Professionnelle</p>
                <div class="status-indicators">
                    <div class="status-dot"></div>
                    <div class="status-dot"></div>
                    <div class="status-dot"></div>
                </div>
            </div>

            <!-- Messages flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="flash-message mb-6 p-4 rounded-xl border-l-4 shadow-lg relative overflow-hidden
                            {% if category == 'error' %}border-red-500 bg-red-50 text-red-800
                            {% elif category == 'success' %}border-green-500 bg-green-50 text-green-800
                            {% else %}border-blue-500 bg-blue-50 text-blue-800{% endif %}">
                            <div class="flex items-start space-x-3 relative z-10">
                                <div class="flex-shrink-0 mt-0.5">
                                    <i class="fas {% if category == 'error' %}fa-exclamation-circle text-red-500
                                                  {% elif category == 'success' %}fa-check-circle text-green-500
                                                  {% else %}fa-info-circle text-blue-500{% endif %} text-lg"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium text-sm leading-relaxed">{{ message }}</p>
                                </div>
                                <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 ml-4 hover:bg-black/10 rounded-full p-1 transition-colors duration-200">
                                    <i class="fas fa-times text-sm"></i>
                                </button>
                            </div>
                            <div class="absolute top-0 right-0 w-20 h-20 opacity-10">
                                <i class="fas {% if category == 'error' %}fa-exclamation-triangle
                                              {% elif category == 'success' %}fa-check
                                              {% else %}fa-info{% endif %} text-4xl absolute top-2 right-2"></i>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}

            <!-- Formulaire de connexion -->
            <form method="POST" class="space-y-6" id="loginForm">
                <div class="form-field">
                    <div class="input-wrapper">
                        <i class="fas fa-envelope field-icon"></i>
                        <input type="email" id="email" name="email" required
                               class="input-field"
                               placeholder="dr.dupont@hopital.fr">
                    </div>
                    <label for="email" class="block text-sm font-semibold text-secondary mt-2 ml-1">
                        <i class="fas fa-envelope mr-2 text-blue-500"></i>Email professionnel *
                        <span class="help-tooltip" role="tooltip" aria-describedby="email-help">
                            <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour le champ email"></i>
                            <div class="help-content" id="email-help">Adresse email institutionnelle pour la sécurité</div>
                        </span>
                    </label>
                </div>

                <div class="form-field">
                    <div class="input-wrapper">
                        <i class="fas fa-lock field-icon"></i>
                        <input type="password" id="password" name="password" required
                               class="input-field"
                               placeholder="••••••••">
                        <button type="button" class="password-toggle" id="password-toggle" aria-label="Afficher/masquer le mot de passe">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <label for="password" class="block text-sm font-semibold text-secondary mt-2 ml-1">
                        <i class="fas fa-lock mr-2 text-green-500"></i>Mot de passe *
                        <span class="help-tooltip" role="tooltip" aria-describedby="password-help">
                            <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour le mot de passe"></i>
                            <div class="help-content" id="password-help">Mot de passe sécurisé requis</div>
                        </span>
                    </label>
                </div>

                <button type="submit" class="btn-primary w-full py-4 rounded-xl font-semibold text-white text-sm uppercase tracking-wide relative overflow-hidden">
                    <i class="fas fa-sign-in-alt mr-2"></i>Se connecter
                </button>
            </form>

            <!-- Liens -->
            <div class="mt-8 text-center space-y-4">
                <div class="flex items-center justify-center space-x-2">
                    <span class="text-secondary">Pas encore de compte ?</span>
                    <a href="{{ url_for('register') }}" class="link-primary">
                        Créer un compte
                    </a>
                </div>
                <div class="flex items-center justify-center space-x-2">
                    <a href="{{ url_for('index') }}" class="link-primary text-sm">
                        <i class="fas fa-arrow-left mr-1"></i>Retour à l'accueil
                    </a>
                </div>
            </div>

            <!-- Informations légales -->
            <div class="security-card mt-8 p-6 rounded-2xl">
                <div class="flex items-start space-x-4">
                    <div class="flex-shrink-0 mt-1">
                        <div class="w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg">
                            <i class="fas fa-shield-alt text-white text-sm"></i>
                        </div>
                    </div>
                    <div class="flex-1">
                        <h4 class="text-primary font-bold text-sm mb-2">Sécurité & Confidentialité</h4>
                        <p class="text-secondary text-xs leading-relaxed">
                            En vous connectant, vous acceptez nos conditions d'utilisation et notre politique de confidentialité.
                            Toutes les données sont chiffrées et traitées selon les normes RGPD et les standards de sécurité médicale (HDS).
                            Accès réservé aux professionnels de santé autorisés.
                        </p>
                        <div class="mt-4 flex flex-wrap items-center gap-2">
                            <div class="security-indicator">
                                <i class="fas fa-lock"></i>
                                <span class="text-primary">SSL</span>
                            </div>
                            <div class="security-indicator">
                                <i class="fas fa-user-shield"></i>
                                <span class="text-primary">RGPD</span>
                            </div>
                            <div class="security-indicator">
                                <i class="fas fa-certificate"></i>
                                <span class="text-primary">HDS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 1;

        // Animation d'entrée simple
        function initializeAnimations() {
            const card = document.querySelector('.login-card');
            const formFields = document.querySelectorAll('.form-field');

            // Animation de la carte principale
            card.style.animation = 'cardEntrance 0.8s ease-out forwards';

            // Animation échelonnée des champs
            formFields.forEach((field, index) => {
                field.style.opacity = '0';
                field.style.transform = 'translateY(10px)';
                field.style.animation = `staggerEntrance 0.5s ease-out ${0.2 + index * 0.1}s forwards`;
            });

            // Focus automatique avec délai
            setTimeout(() => {
                document.getElementById('email').focus();
            }, 1000);
        }

        // Gestionnaire d'erreurs simple
        function showError(message, type = 'error', duration = 5000) {
            const notification = document.createElement('div');
            notification.className = `error-notification fixed top-4 right-4 z-50 min-w-80 max-w-96 rounded-xl p-4 shadow-lg text-white
                ${type === 'success' ? 'bg-green-500' :
                  type === 'warning' ? 'bg-yellow-500' :
                  type === 'info' ? 'bg-blue-500' : 'bg-red-500'}`;

            notification.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0 mt-0.5">
                        <i class="fas ${getIconForType(type)} text-xl"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-sm leading-relaxed">${ message }</p>
                    </div>
                    <button onclick="dismissNotification(this)" class="flex-shrink-0 ml-3 hover:bg-white/20 rounded-full p-1 transition-colors duration-200">
                        <i class="fas fa-times text-sm"></i>
                    </button>
                </div>
            `;

            document.body.appendChild(notification);

            // Auto-dismiss simple
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, duration);
        }

        function getIconForType(type) {
            switch (type) {
                case 'success': return 'fa-check-circle';
                case 'warning': return 'fa-exclamation-triangle';
                case 'info': return 'fa-info-circle';
                case 'error':
                default: return 'fa-exclamation-circle';
            }
        }

        function dismissNotification(button) {
            const notification = button.closest('.error-notification');
            notification.style.opacity = '0';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }

        // Gestion des états de validation
        function markFieldAsError(fieldId, errorMessage) {
            const field = document.getElementById(fieldId);
            if (!field) return;

            const formField = field.closest('.form-field');
            if (!formField) return;

            formField.classList.remove('field-valid');
            formField.classList.add('field-error');

            // Animation de shake simple
            field.style.animation = 'errorShake 0.4s ease-in-out';
            setTimeout(() => {
                field.style.animation = '';
            }, 400);
        }

        function markFieldAsValid(fieldId) {
            const field = document.getElementById(fieldId);
            if (!field) return;

            const formField = field.closest('.form-field');
            if (!formField) return;

            formField.classList.remove('field-error');
            formField.classList.add('field-valid');
        }

        function clearAllFieldErrors() {
            document.querySelectorAll('.field-error').forEach(field => {
                field.classList.remove('field-error');
            });

            document.querySelectorAll('.field-valid').forEach(field => {
                field.classList.remove('field-valid');
            });
        }

        // Gestion du formulaire avec indicateur de chargement
        function handleFormSubmission(e) {
            const form = e.target;
            const submitBtn = form.querySelector('button[type="submit"]');

            // Validation
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;

            clearAllFieldErrors();
            let isValid = true;

            if (!email) {
                markFieldAsError('email', 'L\'email est obligatoire');
                isValid = false;
            } else if (!/^[^\^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                markFieldAsError('email', 'Format d\'email invalide');
                isValid = false;
            } else {
                markFieldAsValid('email');
            }

            if (!password) {
                markFieldAsError('password', 'Le mot de passe est obligatoire');
                isValid = false;
            } else {
                markFieldAsValid('password');
            }

            if (!isValid) {
                e.preventDefault();
                showError('Veuillez corriger les erreurs dans le formulaire avant de continuer.', 'error', 6000);
                return;
            }

            // Afficher l'indicateur de chargement
            submitBtn.classList.add('loading');
            submitBtn.innerHTML = '<i class="fas fa-spinner mr-2"></i>Connexion en cours...';
            submitBtn.disabled = true;

            // Le formulaire sera soumis normalement
        }

        // Gestionnaire pour le bouton d'œil du mot de passe
        function togglePasswordVisibility() {
            const input = document.getElementById('password');
            const button = document.getElementById('password-toggle');
            const icon = button.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
                button.setAttribute('aria-label', 'Masquer le mot de passe');
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
                button.setAttribute('aria-label', 'Afficher le mot de passe');
            }
        }

        // Validation en temps réel
        function setupRealTimeValidation() {
            document.getElementById('email').addEventListener('blur', function() {
                const value = this.value.trim();
                if (value.length === 0) {
                    markFieldAsError('email', 'L\'email est obligatoire');
                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                    markFieldAsError('email', 'Format d\'email invalide');
                } else {
                    markFieldAsValid('email');
                }
            });

            document.getElementById('password').addEventListener('blur', function() {
                const value = this.value;
                if (value.length === 0) {
                    markFieldAsError('password', 'Le mot de passe est obligatoire');
                } else {
                    markFieldAsValid('password');
                }
            });
        }

        // Gestion de l'accessibilité
        function setupAccessibility() {
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.help-tooltip .help-content').forEach(tooltip => {
                        tooltip.style.opacity = '0';
                        tooltip.style.visibility = 'hidden';
                        tooltip.style.transform = 'translateX(-50%)';
                    });
                }
            });

            document.querySelectorAll('.help-tooltip .help-icon').forEach(icon => {
                icon.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const tooltip = this.nextElementSibling;
                        const isVisible = tooltip.style.opacity === '1';

                        document.querySelectorAll('.help-tooltip .help-content').forEach(t => {
                            t.style.opacity = '0';
                            t.style.visibility = 'hidden';
                            t.style.transform = 'translateX(-50%)';
                        });

                        if (!isVisible) {
                            tooltip.style.opacity = '1';
                            tooltip.style.visibility = 'visible';
                            tooltip.style.transform = 'translateX(-50%) translateY(-5px)';
                        }
                    }
                });
            });
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            initializeAnimations();
            setupRealTimeValidation();
            setupAccessibility();

            // Gestionnaires d'événements
            document.getElementById('password-toggle').addEventListener('click', togglePasswordVisibility);
            document.getElementById('loginForm').addEventListener('submit', handleFormSubmission);
        });
    </script>
</body>
</html>
