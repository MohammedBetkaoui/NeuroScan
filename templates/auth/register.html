<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - NeuroScan</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.build.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="register-card rounded-2xl p-8 w-full max-w-2xl mx-auto">
        <!-- Logo et titre -->
        <div class="text-center mb-8">
            <div class="logo-container inline-flex items-center justify-center w-20 h-20 rounded-2xl mb-6 mx-auto">
                <i class="fas fa-brain text-white text-3xl"></i>
            </div>
            <h1 class="text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-gray-900 bg-clip-text text-transparent mb-3 title-mobile">
                NeuroScan Pro
            </h1>
            <p class="text-gray-600 text-lg font-medium subtitle-mobile">Plateforme d'Intelligence Artificielle Médicale</p>
            <div class="hidden md:flex items-center justify-center space-x-2 mt-4">
                <div class="h-1 w-8 bg-blue-500 rounded-full"></div>
                <div class="h-1 w-4 bg-green-500 rounded-full"></div>
                <div class="h-1 w-6 bg-purple-500 rounded-full"></div>
            </div>
            <!-- Indicateurs mobiles -->
            <div class="md:hidden status-indicators-mobile">
                <div class="status-dot-mobile"></div>
                <div class="status-dot-mobile"></div>
                <div class="status-dot-mobile"></div>
            </div>
        </div>

        <!-- Indicateur de progression -->
        <div class="progress-section mb-10">
            <!-- Version desktop -->
            <div class="hidden md:block">
                <div class="flex justify-center items-center mb-6">
                    <div class="flex items-center space-x-6">
                        <div class="step-indicator w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold transition-all duration-500 transform hover:scale-110" data-step="1">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="connector h-1 w-16 bg-gray-200 rounded-full overflow-hidden relative">
                            <div class="connector-fill h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-700 ease-out absolute left-0 top-0"></div>
                            <div class="connector-glow absolute inset-0 bg-gradient-to-r from-blue-400/50 to-green-400/50 opacity-0 transition-opacity duration-500"></div>
                        </div>
                        <div class="step-indicator w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold transition-all duration-500 transform hover:scale-110" data-step="2">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="connector h-1 w-16 bg-gray-200 rounded-full overflow-hidden relative">
                            <div class="connector-fill h-full bg-gradient-to-r from-green-500 to-purple-500 transition-all duration-700 ease-out absolute left-0 top-0"></div>
                            <div class="connector-glow absolute inset-0 bg-gradient-to-r from-green-400/50 to-purple-400/50 opacity-0 transition-opacity duration-500"></div>
                        </div>
                        <div class="step-indicator w-12 h-12 rounded-2xl flex items-center justify-center text-lg font-bold transition-all duration-500 transform hover:scale-110" data-step="3">
                            <i class="fas fa-stethoscope"></i>
                        </div>
                    </div>
                </div>
                <div class="relative">
                    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner">
                        <div class="progress-bar h-full rounded-full transition-all duration-700 ease-out shadow-lg"></div>
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent opacity-60 animate-pulse rounded-full"></div>
                    <div class="progress-hint">Étape 1 sur 3 - Informations personnelles</div>
                </div>
            </div>

            
        </div>

        <!-- Messages flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="mb-4 p-4 rounded-xl shadow-lg relative overflow-hidden {% if category == 'error' %}error-message bg-red-50 text-red-800 border-red-500{% elif category == 'success' %}success-message bg-green-50 text-green-800 border-green-500{% else %}info-message bg-blue-50 text-blue-800 border-blue-500{% endif %}">
                        <div class="flex items-start space-x-3 relative z-10">
                            <div class="flex-shrink-0 mt-0.5">
                                <i class="fas {% if category == 'error' %}fa-exclamation-circle text-red-500{% elif category == 'success' %}fa-check-circle text-green-500{% else %}fa-info-circle text-blue-500{% endif %} text-lg"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-sm leading-relaxed">{{ message }}</p>
                            </div>
                            <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 ml-4 hover:bg-black/10 rounded-full p-1 transition-colors duration-200">
                                <i class="fas fa-times text-sm"></i>
                            </button>
                        </div>
                        <div class="absolute top-0 right-0 w-20 h-20 opacity-10">
                            <i class="fas {% if category == 'error' %}fa-exclamation-triangle{% elif category == 'success' %}fa-check{% else %}fa-info{% endif %} text-4xl absolute top-2 right-2"></i>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Formulaire d'inscription -->
        <form id="registerForm" method="POST" class="space-y-6">
            <!-- Étape 1: Informations personnelles -->
            <div id="step1" class="step active">
                <h3 class="step-title text-2xl mb-6 text-center">Informations personnelles</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="first_name" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-user mr-2 text-blue-500"></i>Prénom *
                        </label>
                        <input type="text" id="first_name" name="first_name" required
                               class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-blue-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="Jean">
                        <i class="fas fa-user absolute left-4 top-12 text-gray-400"></i>
                    </div>

                    <div class="form-group">
                        <label for="last_name" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-user-tag mr-2 text-blue-500"></i>Nom *
                        </label>
                        <input type="text" id="last_name" name="last_name" required
                               class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-blue-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="Dupont">
                        <i class="fas fa-user-tag absolute left-4 top-12 text-gray-400"></i>
                    </div>
                </div>

                <div class="form-group mt-6">
                    <label for="email" class="block text-sm font-semibold text-gray-700 mb-3">
                        <i class="fas fa-envelope mr-2 text-blue-500"></i>Email professionnel *
                        <span class="help-tooltip help-tooltip-mobile" role="tooltip" aria-describedby="email-help">
                            <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour le champ email"></i>
                            <div class="help-content help-content-mobile" id="email-help">Adresse email institutionnelle requise pour la validation professionnelle</div>
                        </span>
                    </label>
                    <input type="email" id="email" name="email" required
                           class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-blue-500 transition-all duration-300 text-gray-900 font-medium"
                           placeholder="dr.dupont@hopital.fr">
                    <i class="fas fa-envelope absolute left-4 top-12 text-gray-400"></i>
                </div>
            </div>

            <!-- Étape 2: Sécurité du compte -->
            <div id="step2" class="step">
                <h3 class="step-title text-2xl mb-6 text-center">Sécurité du compte</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="password" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-lock mr-2 text-green-500"></i>Mot de passe *
                            <span class="help-tooltip help-tooltip-mobile" role="tooltip" aria-describedby="password-help">
                                <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour le mot de passe"></i>
                                <div class="help-content help-content-mobile" id="password-help">Au moins 8 caractères avec majuscules, minuscules, chiffres et symboles</div>
                            </span>
                        </label>
                        <input type="password" id="password" name="password" required minlength="6"
                               class="input-field w-full pl-12 pr-14 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-green-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="••••••••">
                        <i class="fas fa-lock absolute left-4 top-12 text-gray-400"></i>
                        <button type="button" class="password-toggle" id="password-toggle" aria-label="Afficher/masquer le mot de passe">
                            <i class="fas fa-eye"></i>
                        </button>
                        <p class="text-xs text-gray-500 mt-2 ml-1">Au moins 6 caractères</p>
                    </div>

                    <div class="form-group">
                        <label for="confirm_password" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-shield-alt mr-2 text-green-500"></i>Confirmer le mot de passe *
                        </label>
                        <input type="password" id="confirm_password" name="confirm_password" required minlength="6"
                               class="input-field w-full pl-12 pr-14 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-green-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="••••••••">
                        <i class="fas fa-shield-alt absolute left-4 top-12 text-gray-400"></i>
                        <button type="button" class="password-toggle" id="confirm-password-toggle" aria-label="Afficher/masquer la confirmation du mot de passe">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div id="password-match" class="text-xs mt-2 ml-1 hidden text-red-600 font-medium">
                            <i class="fas fa-exclamation-triangle mr-1"></i>Les mots de passe ne correspondent pas
                        </div>
                    </div>
                </div>

                <!-- Indicateur de force du mot de passe -->
                <div class="security-indicator-mobile mt-6 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl border border-blue-100">
                    <div class="flex items-center space-x-2 mb-3">
                        <i class="fas fa-shield-check text-blue-500"></i>
                        <span class="text-sm font-semibold text-gray-700">Sécurité du mot de passe</span>
                        <div class="ml-auto">
                            <span id="password-strength" class="text-xs font-medium px-2 py-1 rounded-full bg-gray-200 text-gray-600">Faible</span>
                        </div>
                    </div>
                    <div class="security-grid-mobile">
                        <div class="security-item-mobile password-criterion" id="length-criterion">
                            <i class="fas fa-times-circle text-red-400 transition-all duration-300"></i>
                            <span class="text-gray-600">Au moins 8 caractères</span>
                        </div>
                        <div class="security-item-mobile password-criterion" id="case-criterion">
                            <i class="fas fa-times-circle text-red-400 transition-all duration-300"></i>
                            <span class="text-gray-600">Majuscules et minuscules</span>
                        </div>
                        <div class="security-item-mobile password-criterion" id="number-criterion">
                            <i class="fas fa-times-circle text-red-400 transition-all duration-300"></i>
                            <span class="text-gray-600">Au moins un chiffre</span>
                        </div>
                        <div class="security-item-mobile password-criterion" id="symbol-criterion">
                            <i class="fas fa-times-circle text-red-400 transition-all duration-300"></i>
                            <span class="text-gray-600">Au moins un symbole spécial</span>
                        </div>
                    </div>
                    <div class="mt-3">
                        <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                            <div id="strength-bar" class="h-full bg-red-400 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Étape 3: Informations professionnelles -->
                        <!-- Étape 3: Informations professionnelles -->
            <div id="step3" class="step">
                <h3 class="step-title text-2xl mb-6 text-center">Informations professionnelles</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="specialty" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-stethoscope mr-2 text-purple-500"></i>Spécialité
                            <span class="help-tooltip help-tooltip-mobile" role="tooltip" aria-describedby="specialty-help">
                                <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour la spécialité"></i>
                                <div class="help-content help-content-mobile" id="specialty-help">Votre domaine médical principal pour personnaliser l'expérience</div>
                            </span>
                        </label>
                        <select id="specialty" name="specialty"
                                class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-purple-500 transition-all duration-300 text-gray-900 font-medium bg-white">
                            <option value="">Sélectionner une spécialité</option>
                            <option value="Neurologie">🧠 Neurologie</option>
                            <option value="Neurochirurgie">⚕️ Neurochirurgie</option>
                            <option value="Radiologie">📊 Radiologie</option>
                            <option value="Médecine générale">👨‍⚕️ Médecine générale</option>
                            <option value="Oncologie">🎗️ Oncologie</option>
                        </select>
                        <i class="fas fa-stethoscope absolute left-4 top-12 text-gray-400"></i>
                    </div>

                    <div class="form-group">
                        <label for="hospital" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-hospital mr-2 text-purple-500"></i>Établissement
                        </label>
                        <input type="text" id="hospital" name="hospital"
                               class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-purple-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="CHU de Paris">
                        <i class="fas fa-hospital absolute left-4 top-12 text-gray-400"></i>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                    <div class="form-group">
                        <label for="license_number" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-id-card mr-2 text-purple-500"></i>Numéro RPPS/ADELI
                            <span class="help-tooltip help-tooltip-mobile" role="tooltip" aria-describedby="license-help">
                                <i class="fas fa-question-circle help-icon" tabindex="0" aria-label="Aide pour le numéro professionnel"></i>
                                <div class="help-content help-content-mobile" id="license-help">Identifiant professionnel français (requis pour la validation)</div>
                            </span>
                        </label>
                        <input type="text" id="license_number" name="license_number"
                               class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-purple-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="12345678901">
                        <i class="fas fa-id-card absolute left-4 top-12 text-gray-400"></i>
                    </div>

                    <div class="form-group">
                        <label for="phone" class="block text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-phone mr-2 text-purple-500"></i>Téléphone
                        </label>
                        <input type="tel" id="phone" name="phone"
                               class="input-field w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-0 focus:border-purple-500 transition-all duration-300 text-gray-900 font-medium"
                               placeholder="01 23 45 67 89">
                        <i class="fas fa-phone absolute left-4 top-12 text-gray-400"></i>
                    </div>
                </div>

                <!-- Informations de validation -->
                <div class="mt-8 p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border border-purple-100">
                    <div class="flex items-start space-x-3">
                        <div class="flex-shrink-0">
                            <i class="fas fa-check-circle text-green-500 text-lg"></i>
                        </div>
                        <div>
                            <h4 class="text-sm font-semibold text-gray-900 mb-2">Validation professionnelle</h4>
                            <p class="text-xs text-gray-600 leading-relaxed">
                                Vos informations professionnelles seront vérifiées pour garantir la sécurité et la conformité de notre plateforme médicale.
                                Seuls les professionnels de santé autorisés peuvent accéder aux fonctionnalités d'analyse IA.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Boutons de navigation -->
                        <!-- Boutons de navigation -->
            <div class="nav-buttons-mobile md:flex md:justify-between md:pt-8 md:border-t md:border-gray-100">
                <button type="button" id="prevBtn"
                        class="nav-button-mobile md:flex-1 md:mr-4 btn-secondary px-8 py-4 rounded-xl font-semibold text-sm transition-all duration-300 hidden">
                    <i class="fas fa-arrow-left mr-2"></i>Précédent
                </button>

                <button type="button" id="nextBtn"
                        class="nav-button-mobile md:flex-1 btn-primary px-8 py-4 rounded-xl font-semibold text-white text-sm">
                    Suivant<i class="fas fa-arrow-right ml-2"></i>
                </button>

                <button type="submit" id="submitBtn"
                        class="nav-button-mobile md:flex-1 btn-success px-8 py-4 rounded-xl font-semibold text-white text-sm hidden">
                    <i class="fas fa-user-plus mr-2"></i>Créer mon compte
                </button>
            </div>
        </form>

        <!-- Liens -->
        <div class="mt-8 text-center space-y-4">
            <div class="flex items-center justify-center space-x-1">
                <span class="text-gray-600">Déjà un compte ?</span>
                <a href="{{ url_for('login') }}" class="link-primary font-semibold">
                    Se connecter
                </a>
            </div>
            <div class="flex items-center justify-center space-x-1">
                <a href="{{ url_for('index') }}" class="link-primary text-sm">
                    <i class="fas fa-arrow-left mr-1"></i>Retour à l'accueil
                </a>
            </div>
        </div>

        <!-- Informations légales -->
        <div class="mt-8 info-card p-6 rounded-2xl">
            <div class="flex items-start space-x-4">
                <div class="flex-shrink-0 mt-1">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-shield-alt text-white text-sm"></i>
                    </div>
                </div>
                <div class="flex-1">
                    <h4 class="text-sm font-bold text-gray-900 mb-2">Sécurité & Confidentialité</h4>
                    <p class="text-xs text-gray-600 leading-relaxed">
                        En créant un compte, vous acceptez nos conditions d'utilisation et notre politique de confidentialité.
                        Toutes les données sont chiffrées et traitées selon les normes RGPD et les standards de sécurité médicale (HDS).
                        Vos informations professionnelles sont vérifiées pour garantir l'accès sécurisé à nos outils d'IA médicale.
                    </p>
                    <div class="security-indicators">
                        <div class="security-indicator">
                            <i class="fas fa-lock text-green-500"></i>
                            <span class="text-gray-700">Chiffrement SSL</span>
                        </div>
                        <div class="security-indicator">
                            <i class="fas fa-user-shield text-blue-500"></i>
                            <span class="text-gray-700">RGPD Compliant</span>
                        </div>
                        <div class="security-indicator">
                            <i class="fas fa-certificate text-purple-500"></i>
                            <span class="text-gray-700">Certification HDS</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/register.js') }}"></script>
</body>
</html>
